<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title>Admin || Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="_csrf" th:content="${_csrf.token}" />
  <meta name="_csrf_header" th:content="${_csrf.headerName}" />


  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
  <style>
    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Lato', sans-serif;
      font-size: 0.9rem;
    }

    .sidebar {
      position: fixed;
      top: 0;
      bottom: 0;
      left: 0;
      z-index: 100;
      padding: 70px 0 0;
      box-shadow: inset -1px 0 0 rgba(0, 0, 0, 0.1);
      min-height: 100vh;
    }

    .sidebar .nav-link {
      font-weight: 500;
      color: #333;
      font-weight: bold;
      padding: 0.75rem 1rem;
      margin: 0.125rem 0;
      border-radius: 0.375rem;
      transition: all 0.3s ease;
    }

    .sidebar .nav-link:hover,
    .sidebar .nav-link.active {
      color: var(--primary-color);
      background-color: rgba(13, 110, 253, 0.1);
    }

    .sidebar .nav-link i {
      margin-right: 0.5rem;
    }

    .dashboard-section {
      display: none;
    }

    .dashboard-section.active {
      display: block;
    }

    .form-container {
      background: #fff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .btn-custom {
      background-color: #0d6efd;
      color: #fff;
      border-radius: 8px;
    }

    .btn-custom:hover {
      background-color: #0b5ed7;
    }

    /* Fonts */
    :root {
      --default-font: "Roboto", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
      --heading-font: "Raleway", sans-serif;
      --nav-font: "Poppins", sans-serif;
    }

    /* Global Colors */
    :root {
      --background-color: #ffffff;
      --default-color: #444444;
      --heading-color: #151515;
      --accent-color: #ffc451;
      --contrast-color: #312f2f;
    }

    /* Nav Menu Colors */
    :root {
      --nav-color: rgba(255, 255, 255, 0.905);
      --nav-hover-color: #ffc451;
      --nav-dropdown-background-color: #ffffff;
      --nav-dropdown-color: #212529;
      --nav-dropdown-hover-color: #ffc451;
    }

    .form-container {
      /* background: #fff; */
      border-radius: 12px;
      box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
    }

    h4 {
      font-weight: 600;
      color: #FFBB33;
    }

    /* Button Code  */

    .button {
      margin-top:30px;
      display: flex;
      justify-content: space-between;
    }

    .button input[type="submit"],
    .button input[type="reset"] {
      background-color: rgb(40, 40, 64);
      color: white;
      padding: 10px;
      width: 49%;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      outline: none;
      transition: background 0.3s ease-in-out;
    }


      .button input[type="submit"]:hover,
      .button input[type="reset"]:hover {
      background: #FFBB33;
      /* background: var(--nav-dropdown-hover-color); */
    }




    /* Popup Css */

    .popup {
      visibility: hidden;
      min-width: 250px;
      background-color: #28a745;
      /* green success */
      color: #fff;
      text-align: center;
      border-radius: 8px;
      padding: 15px;
      position: fixed;
      z-index: 1;
      left: 50%;
      bottom: 30px;
      transform: translateX(-50%);
      font-size: 19px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      opacity: 0;
      transition: opacity 0.5s ease, bottom 0.5s ease;
    }

    /* Show the popup */
    .popup.show {
      visibility: visible;
      opacity: 1;
      bottom: 50px;
    }

    .card {
      border-radius: 12px;
      box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.1);
    }

    .nav-tabs .nav-link {
      color: #000;
      font-weight: 500;
    }

    .nav-tabs .nav-link.active {
      color: #f39c12 !important;
      /* Highlighted color like your screenshot */
    }

    #all_courses .master-div {
      width: 100%;
      margin: 20px auto;
      padding: 20px;
      background-color: white;
      box-shadow: 2px 2px 15px rgba(0, 0, 0, 0.2);
      border-radius: 10px;
    }

    #all_courses .button1 {
      width: 150px;
      background-color: #ffc451;
      justify-content: center;
    }

    /*  Admission css */
    #addnewadmission .form-container {
      max-width: 700px;
      margin: 40px auto;
      padding: 25px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
    }

   /* #addnewadmission .form-title {
      text-align: center;
      font-weight: bold;
      margin-bottom: 20px;
      color: #2c3e50;
    }

     #addnewadmission .btn-custom {
      background: #3498db;
      color: white;
      font-weight: bold;
      border-radius: 8px;
    }
    #addnewadmission .btn-custom:hover {
      background: #2980b9;
    }*/

    .loader {
  border: 4px solid #f3f3f3;
  border-top: 4px solid #3498db;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  animation: spin 1s linear infinite;
  margin: auto;

}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

  .dashboard-shortcut a {
    color: #212529;
    text-decoration: none;
    transition: transform 0.2s ease, color 0.2s ease;
    display: inline-block;
    width: 100%;
    padding: 8px 0;
    border-radius: 10px;
  }

  .dashboard-shortcut a:hover {
    transform: scale(1.05);
    color: #FFBB33;
    background-color: #f8f9fa;
  }

  .dashboard-shortcut i {
    margin-bottom: 4px;
  }

  .dashboard-shortcut span {
    font-size: 0.9rem;
  }

.card.shadow-sm {
  border-radius: 15px;
  transition: transform 0.3s, box-shadow 0.3s;
}

.card.shadow-sm:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}

    footer {
    font-size: 14px;
}

footer a {
    color: #FFBB33;
    text-decoration: none;
}

footer a:hover {
    text-decoration: underline;
}

 /*  #home .dashboard-card {
      border-radius: 12px;
      background: #fff;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      padding: 20px;
    }  */
    #home .profile-card {
      text-align: center;
    }

    #home .study-card {
      background: #bce7ec;
      border-radius: 12px;
      padding: 20px;
      color: #1e2a38;
    }
   #home .study-card h6 {
      font-weight: 600;
    }

    #home .section-title {
      font-weight: 600;
      color: #1e2a38;
      margin-bottom: 12px;
    }

    #home .rewards {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
    }

    #home .reward-points {
      font-weight: bold;
      color: #d9534f;
    }
    #home .reward-points.green {
      color: #28a745;
    }

    .nav-tabs .nav-item1 {
  position: relative; /* for dropdown positioning */
  display: list-item; /* default <li> behavior */
  color:#000;
  border:none;
  background-color:#fff;
  margin-left:15px;
}
    /* User Null Photo  */
    .passport-photo {
      width: 150px;
      height: 180px;
      background-color: #FFBB33;
    }
    .passport-photo i {
      font-size: 7rem;
      color: white;
    }

 #adminAdministrator   .card {
  background: #ffffff;
  border-radius: 16px;
  padding: 24px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  width: 100%;
 /* max-width: 380px;  */
  margin: auto;
}

#adminAdministrator .card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 22px rgba(0, 0, 0, 0.1);
}

/* Admin profile section */
 .admin-profile {
  display: flex;
  align-items: center;
  margin-bottom: 20px;
}

.admin-avatar {
  width: 70px;
  height: 70px;
  background: linear-gradient(135deg, #4f46e5, #7c3aed);
 /* background-color:white; */
  border-radius: 50%;
  color: #fff;
  font-size: 26px;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 16px;
  box-shadow: 0 4px 10px rgba(79, 70, 229, 0.3);
}

.admin-info h2 {
  font-size: 22px;
  font-weight: 600;
  color: #1f2937;
  margin: 0;
}

.admin-info .role {
  font-size: 14px;
  color: #6b7280;
  margin-top: 4px;
}

/* Contact info section */
 .contact-info {
  border-top: 1px solid #e5e7eb;
  padding-top: 16px;
}

 .contact-item {
  display: flex;
  align-items: center;
  margin-top: 12px;
}

 .contact-item-icon {
  width: 38px;
  height: 38px;
  background-color: #f3f4f6;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 12px;
  color: #4f46e5;
  transition: background 0.3s ease;
}

#adminAdministrator .contact-item-icon:hover {
  background-color: #eef2ff;
}

.icon-sm {
  width: 20px;
  height: 20px;
}

.contact-label {
  font-size: 13px;
  color: #9ca3af;
  margin: 0;
}

.contact-value {
  font-size: 15px;
  color: #1f2937;
  font-weight: 500;
  margin: 0;
}

    /* Card Container */
 .card {
  background-color: #ffffff;
  border-radius: 16px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
  padding: 20px;
  transition: all 0.3s ease;
/*  max-width: 380px; */
  margin: 20px auto;
}

 .card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);
}

/* Card Header */
#quickStatsDiv .card-header {
  display: flex;
  align-items: center;
  margin-bottom: 16px;
}

#quickStatsDiv .card-icon {
  width: 42px;
  height: 42px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 12px;
}

#quickStatsDiv .icon {
  width: 22px;
  height: 22px;
}

/* Title */
#quickStatsDiv .card-title {
  font-size: 1.2rem;
  font-weight: 600;
  color: #1e293b;
}

/* Quick Stats Section */
#quickStatsDiv .quick-stats {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

/* Individual Stat Item */
#quickStatsDiv .quick-stat-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background-color: #f9fafb;
  padding: 10px 14px;
  border-radius: 12px;
  transition: background-color 0.2s ease;
}

#quickStatsDiv .quick-stat-item:hover {
  background-color: #f1f5f9;
}

/* Left Part (icon + text) */
#quickStatsDiv .quick-stat-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

 #quickStatsDiv .icon-sm {
  width: 20px;
  height: 20px;
}

#quickStatsDiv .quick-stat-left span {
  font-size: 0.95rem;
  color: #374151;
  font-weight: 500;
}

/* Value */
 #quickStatsDiv .quick-stat-value {
  font-size: 1.05rem;
  font-weight: 600;
  color: #111827;
}

/* Responsive */
@media (max-width: 480px) {
  #quickStatsDiv.card {
    padding: 16px;
  }
  #quickStatsDiv.card-title {
    font-size: 1.1rem;
  }
  #quickStatsDiv.quick-stat-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
  }
}

    /* Stats Grid Layout */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

/* Individual Stat Card */
.stat-card {
  background-color: #ffffff;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  padding: 20px;
  transition: all 0.3s ease;
}

.stat-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);
}

/* Card Inner Layout */
.stat-card-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* Title */
.stat-title {
  font-size: 0.95rem;
  color: #64748b;
  margin-bottom: 4px;
  font-weight: 500;
}

/* Value */
.stat-value {
  font-size: 1.8rem;
  color: #1e293b;
  font-weight: 700;
  margin: 2px 0;
}

/* Trend */
.stat-trend {
  font-size: 0.85rem;
  color: #16a34a;
  font-weight: 500;
}

/* Icon Container */
.stat-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(59, 130, 246, 0.1);
}

.icon {
  width: 26px;
  height: 26px;
  color: #3b82f6;
}

/* Color Variants */
.stat-card.success .stat-icon {
  background-color: rgba(34, 197, 94, 0.1);
}

.stat-card.success .icon {
  color: #22c55e;
}

.stat-card.warning .stat-icon {
  background-color: rgba(251, 191, 36, 0.1);
}

.stat-card.warning .icon {
  color: #f59e0b;
}

.stat-card.danger .stat-icon {
  background-color: rgba(239, 68, 68, 0.1);
}

.stat-card.danger .icon {
  color: #ef4444;
}

/* Responsive Adjustments */
@media (max-width: 480px) {
  .stat-card {
    padding: 16px;
  }

  .stat-card-content {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }

  .stat-value {
    font-size: 1.6rem;
  }
}


    /* === Rewards Card ===
.card {
  background-color: #ffffff;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  padding: 20px;
  transition: all 0.3s ease;
}

.card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);
}
*/

/* === Card Header === */
 #referralPoints .card-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}

#referralPoints .card-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

#referralPoints .card-title {
  font-size: 1.2rem;
  font-weight: 700;
  color: #1e293b;
  margin: 0;
}

/* === Rewards List === */
.rewards-items {
  display: flex;
  flex-direction: column;
  gap: 14px;
  margin-bottom: 16px;
}

.reward-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 0;
  border-bottom: 1px solid #e2e8f0;
}

.reward-item:last-child {
  border-bottom: none;
}

.reward-left {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #334155;
  font-weight: 500;
}

#referralPoints .icon-sm {
  width: 20px;
  height: 20px;
}

/* === Reward Amounts === */
.reward-amount {
  font-weight: 600;
  font-size: 0.95rem;
}

.reward-amount.success {
  color: #16a34a;
}

.reward-amount.warning {
  color: #f59e0b;
}

/* === Reward Total Section === */
.reward-total {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 20px;
  padding-top: 12px;
  border-top: 2px solid #e2e8f0;
}

#referralPoints .total-label {
  color: #64748b;
  font-weight: 600;
}

#referralPoints .total-value {
  font-size: 1.4rem;
  font-weight: 700;
  color: #1e293b;
}

/* === Icons === */
#referralPoints .icon {
  width: 26px;
  height: 26px;
  color: inherit;
}

/* === Responsive Adjustments === */
@media (max-width: 480px) {
  #referralPoints.card {
    padding: 16px;
  }

  #referralPoints.card-header {
    gap: 10px;
  }

  #referralPoints.reward-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
  }

  #referralPoints.total-value {
    font-size: 1.2rem;
  }
}


  </style>
</head>
<body>

<div id="popupMessage1" class="popup">
  ✅ Registration has been successful!
</div>
<script th:if="${newUserAdded}">
  popup = document.getElementById("popupMessage1");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage2" class="popup">
  ✅ New Course added successfully!
</div>


<script th:if="${newCourseAdded}">
  const popup = document.getElementById("popupMessage2");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage3" class="popup">
  ✅ New Batch added successfully!
</div>

<script th:if="${newBatchAdded}">
  const popup = document.getElementById("popupMessage3");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage4" class="popup">
  ✅ New admission has been added successfully!
</div>

<script th:if="${newAdmissionAdded}">
  const popup = document.getElementById("popupMessage4");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage5" class="popup">
  ✅ Admission has been updated successfully!
</div>

<script th:if="${admissionUpdated}">
  const popup = document.getElementById("popupMessage5");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage6" class="popup">
  ✅ Batch has been updated successfully!
</div>

<script th:if="${batchUpdated}">
  const popup = document.getElementById("popupMessage6");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage7" class="popup">
  ✅ Students have been assigned to batch successfully!!
</div>

<script th:if="${studentsMapped}">
  const popup = document.getElementById("popupMessage7");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage8" class="popup">
  ✅ Fee has been submitted successfully!!
</div>

<script th:if="${feeSubmitted}">
  const popup = document.getElementById("popupMessage8");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage9" class="popup">
  ✅ Study Materials have been uploaded successfully!!
</div>

<script th:if="${studyMaterialUploaded}">
  const popup = document.getElementById("popupMessage9");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage10" class="popup">
  ✅ PDF has been deleted successfully!!
</div>

<script th:if="${notePdfDeleted}">
  const popup = document.getElementById("popupMessage10");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage11" class="popup">
  ✅ Record has been updated successfully!!
</div>

<script th:if="${facultyUpdated}">
  const popup = document.getElementById("popupMessage11");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<!-- Navbar -->
<nav class="navbar navbar-dark sticky-top bg-light flex-md-nowrap p-2 shadow">
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center" href="#">
      <img src="../Images/xansaitsulutionsLogo.png" width="150" height="60" alt="Logo">
<!--      <span style="color:black;">-->
<!--          <i class="bi bi-person me-1"></i>-->
<!--          <span th:text="${user_master.fullName}"></span>-->
<!--        </span>-->
    </a>
    <div class="d-flex align-items-center me-5">
      <div class="dropdown">
        <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle" id="dropdownUser"
           data-bs-toggle="dropdown">
          <img th:if="${user_master.photoPath != null}" th:src="@{/userphoto/{id}(id=${user_master.userId})}"
               class="rounded-circle me-2 shadow-sm " width="40" height="40">
          <div th:if="${user_master.photoPath == null}" >
            <i class="bi bi-person-circle rounded-circle me-2 fs-3 shadow-sm text-dark"></i>
          </div>
          <span class=" text-dark" >XITS</span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end">
<!--          <li><a class="dropdown-item" href="#"><i class="bi bi-person-circle me-2"></i>Profile</a></li>-->
<!--          <li><a class="dropdown-item" href="/download/invoiceId"><i class="bi bi-person-circle me-2"></i>PDF Generator</a></li>-->
<!--          <li>-->
<!--            <hr class="dropdown-divider">-->
<!--          </li>-->
          <li><a class="dropdown-item" th:href="@{/logout}"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
        </ul>
      </div>
    </div>
    <button class="btn btn-outline-light d-md-none me-2" type="button" data-bs-toggle="collapse"
            data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
      <span style="color:black"><i class="bi bi-list fs-3"></i></span>
    </button>
  </div>
</nav>


<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse bg-white">
      <div class="position-sticky pt-3">
        <ul class="nav flex-column">
          <li class="nav-item"><a class="nav-link active" href="#home"><i class="bi bi-house me-2"></i>Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#student"><i class="bi bi-people me-2"></i>Registration</a>
          </li>
          <li class="nav-item"><a class="nav-link" href="#allfaculties"><i class="bi bi-people me-2"></i>Faculties</a>
          </li>
          <li class="nav-item"><a class="nav-link" href="#allstudents"><i class="bi bi-people me-2"></i>Students</a>
          </li>
          <li class="nav-item"><a class="nav-link" href="#studymaterial"><i class="bi bi-people me-2"></i>Study Material</a>
          </li>
          <li class="nav-item"><a class="nav-link" href="#admission"><i class="bi bi-people me-2"></i>Admission</a>
          </li>
          <li class="nav-item"><a class="nav-link" href="#attendance"><i class="bi bi-people me-2"></i>Attendance</a>
          </li>
          <li class="nav-item"><a class="nav-link" href="#course-part"><i
                  class="bi bi-mortarboard me-2"></i>Course</a></li>
          <li class="nav-item"><a class="nav-link" href="#batch-part"><i class="bi bi-book me-2"></i>Batch</a></li>
          <li class="nav-item"><a class="nav-link" href="#fee-part"><i class="bi bi-currency-rupee me-2"></i>Fee</a></li>
<!--          <li class="nav-item"><a class="nav-link" href="#project-part"><i-->
<!--                  class="bi bi-folder2-open me-2"></i>Project</a></li>-->
<!--          <li class="nav-item"><a class="nav-link" href="#message-part"><i-->
<!--                  class="bi bi-chat-dots me-2"></i>Message</a></li>-->
<!--          <li class="nav-item"><a class="nav-link" href="#reference-part"><i-->
<!--                  class="bi bi-link-45deg me-2"></i>Reference</a></li>-->
<!--          <li class="nav-item"><a class="nav-link" href="#event-part"><i-->
<!--                  class="bi bi-calendar-check me-2"></i>Event</a></li>-->
          <!--          <li class="nav-item"><a class="nav-link text-danger" th:href="@{/logout}"><i-->
          <!--                  class="bi bi-box-arrow-left me-2"></i>Logout</a></li>-->
        </ul>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4" id="dashboardContent">


        <!-- Home Page-->
        <div id="home" class="dashboard-section active">
<!--          <h4 class="mt-3">Xansa IT Solutions Dashboard</h4>-->

          <div class="row mt-4">


            <!-- Left Section (Main Content) -->
            <div class="col-lg-8 col-md-8">
            <div id="adminAdministrator" class="mb-3">
              <div class="card">
                <div class="admin-profile">
                  <div class="admin-avatar">X</div>
<!--                  <img src="../favicon.ico" class="admin-avatar">-->
                  <div class="admin-info">
                    <h2>Xansa It Solutions</h2>
                    <p class="role">System Administrator</p>
                  </div>
                </div>
                <div class="contact-info">
                  <div class="contact-item">
                    <div class="contact-item-icon">
                      <svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                      </svg>
                    </div>
                    <div>
                      <p class="contact-label">Email</p>
                      <p class="contact-value">contact@xansa.net</p>
                    </div>
                  </div>
                  <div class="contact-item">
                    <div class="contact-item-icon">
                      <svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                      </svg>
                    </div>
                    <div>
                      <p class="contact-label">Phone</p>
                      <p class="contact-value">+91 8770480826</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

              <div id="quickStatsDiv" class="mb-3">
              <div class="card">
                <div class="card-header">
                  <div class="card-icon" style="background-color: rgba(59, 130, 246, 0.1); color: #3b82f6;">
                    <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                    </svg>
                  </div>
                  <h3 class="card-title">Quick Stats</h3>
                </div>
                <div class="quick-stats">
                  <div class="quick-stat-item">
                    <div class="quick-stat-left">
                      <svg class="icon-sm" style="color: #3b82f6;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                      </svg>
                      <span>Active Students</span>
                    </div>
                    <span class="quick-stat-value">142</span>
                  </div>
                  <div class="quick-stat-item">
                    <div class="quick-stat-left">
                      <svg class="icon-sm" style="color: #16a34a;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                      </svg>
                      <span>Ongoing Courses</span>
                    </div>
                    <span class="quick-stat-value">18</span>
                  </div>
                  <div class="quick-stat-item">
                    <div class="quick-stat-left">
                      <svg class="icon-sm" style="color: #f59e0b;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                      </svg>
                      <span>Completion Rate</span>
                    </div>
                    <span class="quick-stat-value">87%</span>
                  </div>
                </div>
              </div>
              </div>


              <div class="stats-grid mb-3">
                <div class="stat-card">
                  <div class="stat-card-content">
                    <div>
                      <p class="stat-title">Total Students</p>
                      <p class="stat-value" th:text="${allstudents.size()}"></p>
<!--                      <p class="stat-trend">↑ 12% from last month</p>-->
                    </div>
                    <div class="stat-icon primary">
                      <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                      </svg>
                    </div>
                  </div>
                </div>
                <div class="stat-card success">
                  <div class="stat-card-content">
                    <div>
                      <p class="stat-title">Total Courses</p>
                      <p class="stat-value" th:text="${allcourses.size()}"></p>
<!--                      <p class="stat-trend">↑ 3 new courses</p>-->
                    </div>
                    <div class="stat-icon success">
                      <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                      </svg>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card mb-3">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
              <div id="referralPoints" >
              <div class="card">
                <div class="card-header">
                  <div class="card-icon" style="background-color: rgba(22, 163, 74, 0.1); color: #16a34a;">
                    <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path>
                    </svg>
                  </div>
                  <h3 class="card-title">Rewards</h3>
                </div>
                <div class="rewards-items">
                  <div class="reward-item">
                    <div class="reward-left">
                      <svg class="icon-sm" style="color: #f59e0b;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                      </svg>
                      <span>Assignments Credited</span>
                    </div>
                    <span class="reward-amount warning">+ ₹250</span>
                  </div>
                  <div class="reward-item">
                    <div class="reward-left">
                      <svg class="icon-sm" style="color: #16a34a;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                      </svg>
                      <span>Referrals Credited</span>
                    </div>
                    <span class="reward-amount success">+ ₹280</span>
                  </div>
                </div>
                <div class="reward-total">
                  <span class="total-label">Total Earnings</span>
                  <span class="total-value">₹530</span>
                </div>
              </div>
              </div>
            </div>
          </div>
          <div th:insert="~{fragments :: footer}"></div>
        </div>

        <!-- New User Registration Part -->
        <div id="student" class="dashboard-section">
          <h3 class="text-center mt-3">--Registration--</h3>
          <div class="row mt-4">
            <div class="col-lg-8 col-md-8 mb-3">
              <div class="card p-3">


                <!-- Tabs -->
                <ul class="nav nav-tabs" id="myTab2" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="newuser-tab" data-bs-toggle="tab" data-bs-target="#addnewuser"
                            type="button">Add New User</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="usernotifications-tab" data-bs-toggle="tab"
                            data-bs-target="#user_notifications" type="button">Notifications</button>
                  </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content p-3">
                  <div class="tab-pane fade show active" id="addnewuser" role="tabpanel">
                    <h4>Add New User</h4>
                    <!--                    <div class="form-container">-->
                    <form method="post" id="registerForm" th:action="@{'/admin/registration'}" th:object="${newUser}" enctype="multipart/form-data">
                      <div class="mb-3">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-control" name="fullName" th:value="${newUser.fullName}"
                               required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" name="email" th:value="${newUser.email}" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Contact No</label>
                        <input type="text" class="form-control" name="contactNo" th:value="${newUser.contactNo}"
                               maxlength="15" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Date of Birth</label>
                        <input type="date" class="form-control" th:value="${newUser.dob}" name="dob" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Address</label>
                        <textarea class="form-control" th:value="${newUser.address}" name="address" required></textarea>
<!--                        <input type="text" class="form-control" th:value="${newUser.address}" name="address">-->
                      </div>

                      <div class="mb-3">
                        <label class="form-label">City</label>
                        <input type="text" class="form-control" th:value="${newUser.city}" name="city" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Photo(Optional)</label>
                        <input type="file" class="form-control" name="userPhoto">
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Role</label>
                        <select class="form-select" name="role" th:value="${newUser.role}" required>
                          <option value="" disabled>-- Select Role --</option>
                          <option value="STUDENT" selected>Student</option>
                          <option value="FACULTY">Faculty</option>
                        </select>
                      </div>

                      <div class="button">
                        <input type="reset" value="Reset">
                        <input type="submit" id="registerButton" value="Register">
                      </div>
                    </form>
                    <!--                    </div>-->
                  </div>
                  <div class="tab-pane fade" id="user_notifications" role="tabpanel">
                    <h5>User Notifications</h5>
                    <p>User Notifications list goes here.</p>
                  </div>
                </div>
              </div>
            </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>
          <div th:insert="~{fragments :: footer}"></div>
        </div>


      <!-- Study Material Part -->
      <div id="studymaterial" class="dashboard-section">
        <h4 class="text-center mt-3">--Study Material Management--</h4>
        <div class="row mt-4">
          <div class="col-lg-8 col-md-8 mb-3">
                <div class="card p-3">

                  <!-- Tabs -->
                  <ul class="nav nav-tabs" id="myTab7" role="tablist">
                    <li class="nav-item" role="presentation">
                      <button class="nav-link active" id="allcoursematerial-tab" data-bs-toggle="tab" data-bs-target="#allcoursematerial"
                              type="button">Upload Course Material</button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="showcoursematerial-tab" data-bs-toggle="tab" data-bs-target="#showcoursematerial"
                              type="button">Show</button>
                    </li>

                  </ul>

                  <!-- Tab Content -->
                  <div class="tab-content p-3">
                    <div class="tab-pane fade show active" id="allcoursematerial" role="tabpanel">
                      <h4 class="text-center">--Study & Batch Material Management--</h4>

                      <form th:action="@{'/admin/upload/material'}" method="post" enctype="multipart/form-data">
                        <div class="mb-4">
                          <label for="courseMaterial" class="form-label">Select a Course</label>
                          <select class="form-select" id="courseMaterial" name="course" required>
                            <option value="" selected disabled>-- Select a Course</option>
                            <option th:each="c : ${allcourses}" th:value="${c.courseId}" th:text="${c.courseName}"></option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <label for="document" class="form-label">Select PDF</label>
                          <input type="file" accept="application/pdf" class="form-control" id="document" name="document" required>
                        </div>

                        <div class="button">
                          <input type="reset" value="Reset">
                          <input type="submit" id="updatematerial"  value="Upload">
                        </div>
                      </form>
                    </div>
                    <div class="tab-pane fade" id="showcoursematerial" role="tabpanel">
                      <h4 class="text-center">--Show Study Material--</h4>
                      <div class="mb-3">
                        <label for="courseMaterial" class="form-label">Select a Course</label>
                        <select class="form-select" id="show_courseMaterial" name="course" required>
                          <option value="" selected disabled>-- Select a Course</option>
                          <option th:each="c : ${allcourses}" th:value="${c.courseId}" th:text="${c.courseName}"></option>
                        </select>
                      </div>
                      <!-- Batches Table -->
                      <div class="card shadow-sm" id="materialTable" style="display:none;">
                        <div class="card-body">
                          <h5 class="card-title">Notes</h5>
                          <table class="table table-bordered table-hover mt-3">
                            <thead class="table-dark">
                            <tr>
                              <th>Srno</th>
                              <th>Notes PDF</th>
                              <th>Upload At</th>
                              <th>Action</th>
                            </tr>
                            </thead>
                            <tbody id="materialTableBody">
                            <tr>
                              <td colspan="5" class="text-center text-muted">Select a faculty to view batches</td>
                            </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
<!--                    <div class="tab-pane fade" id="updatecoursematerial" role="tabpanel">-->
<!--                      <h4 class="text-center">&#45;&#45;Delete Faculties&#45;&#45;</h4>-->
<!--                      <p>All User will be show here.</p>-->
<!--                    </div>-->
                    </div>
                  </div>
                  </div>

          <!-- Right Section (Shortcuts) -->
          <div class="col-lg-4 col-md-4">
            <div class="card shadow-sm">
              <div class="card-body">
                <!-- Thymeleaf fragment for shortcuts -->
                <div th:insert="~{fragments :: shortcut}"></div>
              </div>
            </div>
          </div>
        </div>
        <div th:insert="~{fragments :: footer}"></div>
      </div>

      <!-- Students Part -->
      <div id="allstudents" class="dashboard-section">
        <h4 class="text-center mt-3">--Student Management--</h4>
        <div class="row mt-4">
          <div class="col-lg-8 col-md-8 mb-3">
            <div class="card p-3">


              <!-- Tabs -->
              <ul class="nav nav-tabs" id="myTab8" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="update-student-tab" data-bs-toggle="tab" data-bs-target="#studentupdate"
                          type="button">Update Student</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link " id="all-student-tab" data-bs-toggle="tab" data-bs-target="#studentbatches"
                          type="button">Student Batches</button>
                </li>

              </ul>

              <!-- Tab Content -->
              <div class="tab-content p-3">
                <div class="tab-pane fade " id="studentbatches" role="tabpanel">
                  <h4 class="text-center">--Student & Batch Management--</h4>
                  <!-- Faculty Select -->
                  <form id="userForm2" class="card p-4 shadow rounded mb-4">
                    <div class="mb-3">
                      <label for="userId" class="form-label">Select User</label>
                      <select class="form-select" id="userId2" name="userId" required>
                        <option value="" selected disabled>-- Select User --</option>
                        <!--                          <option th:each="userStudent : ${allstudentusers}" th:value="${userStudent.userId}" th:text="${userStudent.fullName} + '(UID - '+ ${userStudent.userId} + ')'}"></option>-->
                        <option th:each="userStudent : ${allstudentusers}"
                                th:value="${userStudent.userId}"
                                th:text="|${userStudent.fullName} (UID - ${userStudent.userId})|">
                      </select>
                    </div>
                  </form>

                  <div id="alldetailofstudent" style="display:none;">
                    <hr class="border border-success">
                  <div class="row mb-3">
                    <div class="row mb-3">
                      <div class="col">
                        <span>Total Batch: <span class="fw-bold fst-italic" >4</span></span>
                      </div>
                      <div class="col">
                        <span>Attendance: <span class="fw-bold " >76%</span></span>
                      </div>
                    </div>
                    <div class="row mb-3">
                      <div class="col">
                        <span>Balance: <span class="fw-bold fst-italic" >₹2000 (all admissions)</span></span>
                      </div>
                      <div class="col">
                        <span>Abc: <span class="fw-bold " >Veer</span></span>
                      </div>
                    </div>
                  </div>

                  <!-- Table to show admissions -->
                  <div class="mt-4">
                    <h5>Admissions List</h5>
                    <table class="table table-bordered table-striped" id="admissionsTable2">
                      <thead class="table-dark">
                      <tr>
                        <th>AID</th>
                        <th>Course</th>
                        <th>Batch</th>
                        <th>Date</th>
                      </tr>
                      </thead>
                      <tbody>
                      <!-- Filled dynamically -->
                      </tbody>
                    </table>
                  </div>
                  </div>
                </div>

                <div class="tab-pane fade show active" id="studentupdate" role="tabpanel">
                  <h4 class="text-center">--Update Student--</h4>

                  <form method="post" id="facultyUpdateForm1" th:action="@{'/admin/faculty/update'}" th:object="${newUser}" enctype="multipart/form-data">

                    <div class="mb-4">
                      <label for="studentSelectId" class="form-label fw-bold">Select Faculty</label>
                      <select id="studentSelectId" name="facultySelectId" class="form-select">
                        <option value="" selected disabled>-- Select Student --</option>
                        <option th:each="s : ${allstudents}" th:value="${s.userId}" th:text="${s.fullName}+' (UID - '+${s.userId}+')'"></option>
                      </select>
                    </div>

                    <div id="studentDetailsForm" style="display:none;">
                      <hr class="border border-success">


                      <div class="row mb-3">
                        <!-- Left side: Name & Email -->
                        <div class="col-md-8">
                          <div class="mb-3">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="studentName" th:value="${newUser.fullName}" name="fullName"  required>
                          </div>

                          <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="studentEmail" th:value="${newUser.email}" name="email"  required>
                          </div>

                          <div class="mb-3">
                            <label class="form-label">Contact No</label>
                            <input type="text" class="form-control" id="studentContactNo" name="contactNo" th:value="${newUser.contactNo}"
                                   maxlength="15" required>
                          </div>

                        </div>

                        <!-- Right side: Passport Photo -->
                        <div class="col-md-4 text-center">
                          <label class="form-label">Student Photo</label>
                          <div class="mb-3">
                            <!-- Preview box --><div>
                            <img id="studentPhotoPreview"
                                 src=""
                                 alt="Student Photo"
                                 class="img-thumbnail mb-2 ms-5 border border-success"
                                 style="width:150px; height:180px; object-fit:cover;display:none;">
<!--                            Null Picture-->
                            <div id="studentnullpic" class="passport-photo border border-2 border-success rounded ms-5" style="display:none;">
                              <i class="bi bi-person"></i>
                            </div>
                          </div>
                          </div>
                          <div>
                            <span id="enabledId1" style="display:none;"><i class="bi bi-check-circle-fill status-icon" style="color:green;font-size: 1rem;">Active Profile</i></span>
                            <span id="disabledId1" style="display:none;"><i class="bi bi-x-circle-fill status-icon" style="color:red;font-size: 1rem;">Inactive Profile</i></span>
                          </div>
                        </div>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Date of Birth</label>
                        <input type="date" class="form-control" id="studentDOB" th:value="${newUser.dob}" name="dob" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Address</label>
                        <textarea class="form-control" th:value="${newUser.address}" id="studentAddress" name="address" required></textarea>
                        <!--                        <input type="text" class="form-control" th:value="${newUser.address}" name="address">-->
                      </div>

                      <div class="mb-3">
                        <label class="form-label">City</label>
                        <input type="text" class="form-control" id="studentCity" th:value="${newUser.city}" name="city" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Photo(Optional)</label>
                        <input type="file" class="form-control" name="facultyPhoto">
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Set Status (IMPORTANT ROLE)</label>
                        <select class="form-select" name="status" id="studentStatus" th:value="${newUser.status}" required>
                          <option value="" disabled>-- Set Status --</option>
                          <option value="true" selected>Enabled</option>
                          <option value="false">Disabled</option>
                        </select>
                      </div>

                      <div class="button">
                        <input type="reset" value="Reset">
                        <input type="submit" id="" value="Update">
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!-- Right Section (Shortcuts) -->
          <div class="col-lg-4 col-md-4">
            <div class="card shadow-sm">
              <div class="card-body">
                <!-- Thymeleaf fragment for shortcuts -->
                <div th:insert="~{fragments :: shortcut}"></div>
              </div>
            </div>
          </div>
        </div>
        <div th:insert="~{fragments :: footer}"></div>

      </div>


      <!-- Admission Part  -->
        <div id="admission" class="dashboard-section">
          <h3 class="text-center mt-3">--Admissions--</h3>
          <div class="row mt-4">
            <div class="col-lg-8 col-md-8 mb-3">
              <div class="card p-3">
                <!-- Tabs -->
                <ul class="nav nav-tabs" id="myTab3" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="new-admission" data-bs-toggle="tab" data-bs-target="#addnewadmission"
                            type="button">New Admission</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="addfee" data-bs-toggle="tab"
                            data-bs-target="#addfees" type="button">Fee</button>
                  </li>
<!--                  <li class="nav-item" role="presentation">-->
<!--                    <button class="nav-link" id="update-admission" data-bs-toggle="tab"-->
<!--                            data-bs-target="#update_admission" type="button">Update-->
<!--                      Admission</button>-->
<!--                  </li>-->
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="admission-tab" data-bs-toggle="tab"
                            data-bs-target="#alladmission" type="button">All Admission</button>
                  </li>
<!--                  <li class="nav-item" role="presentation">-->
<!--                    <button class="nav-link" id="admission-notifications" data-bs-toggle="tab"-->
<!--                            data-bs-target="#admission_notifications" type="button">Notifications</button>-->
<!--                  </li>-->

                </ul>

                <!-- Tab Content -->
                <div class="tab-content p-3">
                  <div class="tab-pane fade " id="alladmission" role="tabpanel">
                    <h4>User Admission</h4>
                    <form id="userForm" class="card p-4 shadow rounded">
                      <div class="mb-3">
                        <label for="userId" class="form-label">Select User</label>
                        <select class="form-select" id="userId" name="userId" required>
                          <option value="" selected disabled>-- Select User --</option>
<!--                          <option th:each="userStudent : ${allstudentusers}" th:value="${userStudent.userId}" th:text="${userStudent.fullName} + '(UID - '+ ${userStudent.userId} + ')'}"></option>-->
                          <option th:each="userStudent : ${allstudentusers}"
                                  th:value="${userStudent.userId}"
                                  th:text="|${userStudent.fullName} (UID - ${userStudent.userId})|">
                          </option>
                        </select>
                      </div>
                    </form>

                    <!-- Table to show admissions -->
                    <div class="mt-4">
                      <h5>Admissions List</h5>
                      <table class="table table-bordered table-striped" id="admissionsTable">
                        <thead class="table-dark">
                        <tr>
                          <th>Admission ID</th>
                          <th>Course</th>
                          <th>Batch</th>
                          <th>Date</th>
                        </tr>
                        </thead>
                        <tbody>
                        <!-- Filled dynamically -->
                        </tbody>
                      </table>
                    </div>
                  </div>


                  <div class="tab-pane fade " id="addfees" role="tabpanel">
                    <h4>Add New Fee</h4>
                    <form th:action="@{/fees/save}" th:object="${feePayment}" onsubmit="document.getElementById('feesubmitbutton').disabled = true;" method="post" class="mt-3">

<!--                      <input type="hidden" th:field="*{feeId}" />-->

                      <div class="mb-3">
                        <label for="userSelect" class="form-label">Select User</label>
                        <select id="userSelect" name="admissionId" class="form-control" onchange="fillAdmissionDetails()" required >
                          <option value="" disabled selected >---select an admission---</option>
                          <option th:each="adm : ${alladmissions}"
                                  th:value="${adm.admissionId}"
                                  th:data-admissionid="${adm.admissionId}"
                                  th:data-category="${adm.feeCategory}"
                                  th:data-coursename="${adm.course.courseName}"
                                  th:data-balance="${adm.netFees}"
                                  th:data-coursefee="${adm.courseFee}"
                                  th:data-lumpsumfee="${adm.course.lumpSum}"
                                  th:data-installment="${adm.perInstallment}"
                                  th:data-isregistrationfee="${adm.registrationFeesPaid}"
                                  th:data-registrationfee="${adm.registrationFee}"
                                  th:data-numberofinstallments="${adm.noOfInstallments}"
                                  th:data-discount="${adm.discount}"
                                  th:data-balanceafterpayment="${adm.lastBalanceAfterPayment}"
                                  th:data-pendinginstallments="${adm.pendingInstallments}"
                                  th:text="${adm.userMaster.fullName}+'(AID - '+${adm.admissionId}+')'" >
<!--                                  th:selected="${feePayment.admission != null and adm.admissionId == feePayment.admission.admissionId}"> &lt;!&ndash;edit par click kare to feeform me data apane se fill ho jaye&ndash;&gt;-->
                          </option>
                        </select>
                      </div>

                      <div id="lumpsumFeeDiv" style="display:none">
                      <div class="row mb-3">
                        <div class="col">
                          <span>Course Name: <span class="fw-bold" id="feecourseName" ></span></span>
                        </div>
                        <div class="col">
                          <span>Course Fee: <span class="fw-bold" id="courseFee" ></span></span>
                        </div>
                      </div>

                      <div class="row mb-3">
                        <div class="col">
                          <span>Fee Category: <span class="fw-bold " id="feeCategory"></span></span>
                        </div>
                        <div class="col">
                          <span>Lumpsum Fee: <span class="fw-bold " id="courseLumpsumFee"></span></span>
                        </div>
                        <div class="col">
                          <span>Fee Status: <span class="fw-bold " id="feestatus"></span></span>
                        </div>
                      </div>
                        <hr class="border border-success">
                      </div>


                      <div id="installmentsFeeDiv" style="display:none">
                        <div class="row mb-3">
                          <div class="col">
                            <span>Course Name: <span class="fw-bold" id="feecourseName1" ></span></span>
                          </div>
                          <div class="col">
                            <span>Fee Category: <span class="fw-bold " id="feeCategory1"></span></span>
                          </div>
                          <div class="col">
                            <span>Registration Fee: <span class="fw-bold " id="registrationFee1"></span></span>
                          </div>
                        </div>

                        <div class="row mb-3">
                          <div class="col">
                            <span>Course Fee: <span class="fw-bold" id="courseFee1" ></span></span>
                          </div>
                          <div class="col">
                            <span>Discount: <span class="fw-bold" id="courseDiscount"></span></span>
                          </div>
                          <div class="col">
                            <span>Net Fee: <span class="fw-bold " id="courseNetFee"></span></span>
                          </div>
                        </div>

                        <div class="row mb-3">
                          <div class="col">
                            <span>Total Installments: <span class="fw-bold" id="totalInstallment" ></span></span>
                          </div>
                          <div class="col">
                            <span>Per Installment: <span class="fw-bold " id="perInstallmentAmount"></span></span>
                          </div>
                          <div class="col">
                            <span>Pending Installments: <span class="fw-bold " id="pendingInstallments"></span></span>
                          </div>
                        </div>


                        <div class="row mb-3">
                          <div class="col">
                            <span>Pending Amount: <span class="fw-bold" id="remainingAmount" ></span></span>
                          </div>
                        </div>



                        <hr class="border border-success">
                      </div>

                      <div id="feeAmountDiv" style="display:none;">
                        <div class="mb-3" id="payRegistrationFee" style="display:none;">
                          <span style="color:red;" class="fw-bolder">Pay Registration Fee</span>
                        </div>
                      <div class="mb-3">
                        <label class="form-label">Amount to be paid</label>
                        <input type="number" id="amount" th:field="*{amount}"  class="form-control" name="amount" required readonly>
                      </div>

                        <div  class="mb-3">
                          <label class="form-label ">Payment Mode</label>

                          <div class="form-check form-check-inline ms-5">
                            <input class="form-check-input" type="radio" name="paymentMode"  id="cashFee" value="Cash"  >
                            <label class="form-check-label" for="cashFee">Cash</label>
                          </div>

                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="paymentMode"  id="onlineFee" value="Online" >
                            <label class="form-check-label" for="onlineFee">Online</label>
                          </div>

                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="paymentMode"  id="cheque" value="Cheque" >
                            <label class="form-check-label" for="cheque">Cheque</label>
                          </div>
                        </div>

                      </div>
                      <input type="hidden" id="feeCategoryForFeeTable" name="feeCategoryForFeeTable" >
                      <hr class="border border-success mb-3">

                      <div class="button">
                        <input type="reset" value="Reset" onclick="document.getElementById('lumpsumFeeDiv').style.display = 'none'; document.getElementById('feeAmountDiv').style.display = 'none'; document.getElementById('installmentsFeeDiv').style.display = 'none';">
                        <input type="submit" id="feesubmitbutton"  value="Pay Fee">
                      </div>
                    </form>
                  </div>

                  <div class="tab-pane fade show active" id="addnewadmission" role="tabpanel">
                      <h4 class="mb-4">Admission Master Form</h4>
                      <form method="post" th:action="@{'/admin/admission'}" th:object="${newadmission}">

                        <!-- User ID -->
                        <div class="mb-3">
                          <label for="user_id"  class="form-label">User</label>
                          <select class="form-select" id="user_id"  name="user_id" required>
                            <option value="" disabled selected>Select Student</option>
                            <span th:each="student : ${allstudents}" >
                            <option th:value="${student.userId}"><span th:text="${student.fullName}"></span></option>
                              </span>
                          </select>
                        </div>

                        <!-- Course ID -->
                        <div class="mb-3">
                          <label for="course_id" class="form-label">Course</label>
                          <select class="form-select" id="course_id" name="course_id" required>
                            <option value="" disabled selected>Select Course</option>
                            <span th:each="course : ${allcourses}" >
                            <option th:value="${course.courseId}"><span th:text="${course.courseName}"></span></option>
                              </span>
                          </select>
                        </div>
                        <div id="feeCategoryDiv" style="display:none;">

                        <div class="mb-3">
                          <label class="form-label ">Fee Category</label>

                          <div class="form-check form-check-inline ms-5">
                            <input class="form-check-input" type="radio" name="feeCategory"  id="feeLumpsum" value="Lumpsum" >
                            <label class="form-check-label" for="feeLumpsum">Lumpsum</label>
                          </div>

                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="feeCategory"  id="feeInstallments" value="Installments" >
                            <label class="form-check-label" for="feeInstallments">Installments</label>
                          </div>
                        </div>

                        <div id="lumpsumFeeCategory" class="mb-3" style="display:none;">
                          <hr class="border border-success">
                          <div class="row my-3">
                            <div class="col"><span>Course Fee: <span class="fw-bolder" id="courseFeeFromDatabase"></span></span></div>
<!--                            <div class="col"><span>Lumpsum Fee: <span class="fw-bolder" id="lumpsumFeeFromDatabase"></span></span></div>-->
                            <div class="col d-flex flex-row">
                            <span>Lumpsum Fee:</span> <input type="number" class="form-control" id="lumpsumFeeFromDatabase" name="lumpsumFeeForNetFee"  readonly>
                            </div>
                          </div>
                          <hr class="border border-success">
                        </div>


                        <div id="installmentsFeeCategory" class="mb-3" style="display:none;">
                          <hr class="border border-success">
                          <div class="row mb-3">
                            <div class="col">
                              Course Fee: <span id="courseFees3" class="fw-bolder"></span>
                            </div>
                            <div class="col">
                              Registration Fee: <span id="registrationFees3" class="fw-bolder"></span>
                            </div>
                            <div class="col">
                              Rest amount: <span id="restFees3" class="fw-bolder">2000</span>
                            </div>
                          </div>
                          <div class="row mb-3">
                            <div class="col">
                              Discount: <input id="feeDiscount" value="0" type="number" name="discount" th:field="*{discount}" onkeyup="calculateInstallment3();" class="form-control" >
                            </div>
                            <div class="col ">
                              <span>Make Installment:</span> <input name="noOfInstallments" th:field="*{noOfInstallments}" id="makeInstallment3" value="1" type="number" onkeyup="calculateInstallment3();" onchange="calculateInstallment3();" class="form-control" >
                            </div>
                            <div class="col">
<!--                              Per Installment: <span id="perInstallment3" class="fw-bolder"></span>-->
                              <span>Per Installment:</span>  <input name="perInstallment" th:field="*{perInstallment}" id="perInstallment3"  value="1" type="number"  class="form-control" readonly >
                            </div>
                          </div>
                          <hr class="border border-success">
                        </div>
                        <div class="mb-3">
                          <label class="form-label ">Registration Fee</label>

                          <div class="form-check form-check-inline ms-5">
                            <input class="form-check-input" type="radio" name="registrationFeesPaid"  id="paid" value="true"  >
                            <label class="form-check-label" for="paid">Paid</label>
                          </div>

                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="registrationFeesPaid"  id="notpaid" value="false" >
                            <label class="form-check-label" for="notpaid">Not paid</label>
                          </div>
                        </div>

                          <div id="paymentModeDiv" style="display:none;" class="mb-3">
                            <label class="form-label ">Payment Mode</label>

                            <div class="form-check form-check-inline ms-5">
                              <input class="form-check-input" type="radio" name="paymentMode"  id="cash" value="Cash"  >
                              <label class="form-check-label" for="cash">Cash</label>
                            </div>

                            <div class="form-check form-check-inline">
                              <input class="form-check-input" type="radio" name="paymentMode"  id="online" value="Online" >
                              <label class="form-check-label" for="online">Online</label>
                            </div>
                          </div>


<!--                        <input type="hidden" id="registrationFeesPaid" name="registrationFeesPaid" th:field="*{registrationFeesPaid}">-->

                        <input type="hidden" id="courseFeeFunction" name="courseFee" th:field="*{courseFee}">
                        <input type="hidden" id="registrationFeesFunction" name="registrationFee" th:field="*{registrationFee}">

                        </div>

                        <!-- Buttons -->
                        <div class="button">
                          <input type="reset" value="Reset">
                          <input type="submit" value="Submit">
                        </div>
                      </form>

                  </div>
<!--                  <div class="tab-pane fade" id="update_admission" role="tabpanel">-->
<!--                    <h4 class="mb-3">Update Admissions</h4>-->
<!--                    <form method="post" th:action="@{'/admin/updateadmission'}" >-->

<!--                      &lt;!&ndash; Admission ID &ndash;&gt;-->
<!--                      <div class="mb-3">-->
<!--                        <label for="admissionID"  class="form-label">Select an admission to update</label>-->
<!--                        <select class="form-select" id="admissionID"  name="admissionID" required>-->
<!--                          <option value="" disabled selected>&#45;&#45;select an admission&#45;&#45;</option>-->
<!--                          <span th:each="admission : ${alladmissions}" >-->
<!--                            <option th:value="${admission.admissionId}"><span th:text="${admission.userMaster.fullName} + ' (AID - ' + ${admission.admissionId} + ')'"></span></option>-->
<!--                              </span>-->
<!--                        </select>-->
<!--                      </div>-->
<!--                      &lt;!&ndash; Course ID &ndash;&gt;-->
<!--                      <div class="mb-3">-->
<!--                        <label for="course_id1" class="form-label">Course</label>-->
<!--                        <select class="form-select" id="course_id1" name="course_id1" required>-->
<!--                          <option value="" disabled selected>Select Course</option>-->
<!--                          <span th:each="course : ${allcourses}" >-->
<!--                            <option th:value="${course.courseId}"><span th:text="${course.courseName}"></span></option>-->
<!--                              </span>-->
<!--                        </select>-->
<!--                      </div>-->
<!--                      &lt;!&ndash; Fees &ndash;&gt;-->
<!--                      <div class="mb-3">-->
<!--                        <label for="fees1" class="form-label">Fees</label>-->
<!--                        <input type="number" step="0.01" class="form-control" id="fees1" name="fees1" readonly required>-->
<!--                      </div>-->

<!--                      &lt;!&ndash; Discount &ndash;&gt;-->
<!--                      <div class="mb-3">-->
<!--                        <label for="discount1" class="form-label">Discount</label>-->
<!--                        <input type="number" value="0.0" step="0.01" class="form-control" onkeyup="calculateNet2()" id="discount1" name="discount1" required>-->
<!--                      </div>-->

<!--                      &lt;!&ndash; Discount &ndash;&gt;-->
<!--                      <div class="mb-3">-->
<!--                        <label for="balance1" class="form-label">Balance</label>-->
<!--                        <input type="number"  value="0.0" step="0.01" class="form-control" id="balance1" name="balance1" readonly required>-->
<!--                      </div>-->


<!--                      &lt;!&ndash; Buttons &ndash;&gt;-->
<!--                      <div class="button">-->
<!--                        <input type="reset" value="Reset">-->
<!--                        <input type="submit" value="Update">-->
<!--                      </div>-->
<!--                    </form>-->
<!--                  </div>-->
<!--                  <div class="tab-pane fade" id="admission_notifications" role="tabpanel">-->
<!--                    <h4>admission Notifications</h4>-->
<!--                    <p>admission Notifications list goes here.</p>-->
<!--                  </div>-->
                </div>
              </div>
            </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>
          <div th:insert="~{fragments :: footer}"></div>
        </div>


      <!-- New User Registration Part -->
      <div id="attendance" class="dashboard-section">
        <h3 class="text-center mt-3">--Attendance--</h3>
        <div class="row mt-4">
          <div class="col-lg-8 col-md-8 mb-3">
            <div class="card p-3">


              <!-- Tabs -->
              <ul class="nav nav-tabs" id="myTab9" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="showattendance-tab" data-bs-toggle="tab" data-bs-target="#showattendance"
                          type="button">Show Attendance</button>
                </li>
              </ul>

              <!-- Tab Content -->
              <div class="tab-content p-3">
                <div class="tab-pane fade show active" id="showattendance" role="tabpanel">
                  <h4>Show Student Attendance</h4>
                  <div class="row justify-content-end mb-3">
                    <div class="col">
                      <div class="input-group">
                        <span class="input-group-text">Select Batch</span>
                        <select class="form-select" id="getbatchid">
                          <option th:if="${allbatches == null || allbatches.isEmpty()}" disabled selected>No Batches Currently
                            Running
                          </option>
                          <option th:unless="${allbatches == null || allbatches.isEmpty()}" value="" disabled selected>Select
                            Batch
                          </option>
                          <option th:each="batch : ${allbatches}" th:text="${batch.name}" th:value="${batch.batchId}"
                                  th:selected="${batch.course.courseId} == ${SelectedCourseId}"></option>
                        </select>
                        <a id="ShowAll" class="btn btn-success">Show</a>
                      </div>
                    </div>
                  </div>
                  <div id="attendancetable" style="display:none">
                  <table class="table table-bordered text-center align-middle">
                    <thead class="table-dark">
                    <tr>
                      <th>Admission ID</th>
                      <th>Student Name</th>
                      <th>Presenties</th>
                      <th>Percentage</th>
                      <th>Remark</th>
                    </tr>
                    </thead>
                    <tbody id="showattendancetable">

                    </tbody>
                  </table>
                  </div>
                </div>

              </div>
            </div>
          </div>
          <!-- Right Section (Shortcuts) -->
          <div class="col-lg-4 col-md-4">
            <div class="card shadow-sm">
              <div class="card-body">
                <!-- Thymeleaf fragment for shortcuts -->
                <div th:insert="~{fragments :: shortcut}"></div>
              </div>
            </div>
          </div>
        </div>
        <div th:insert="~{fragments :: footer}"></div>
      </div>

      <!-- Faculties Part -->
      <div id="allfaculties" class="dashboard-section">
        <h4 class="text-center mt-3">--Faculties Management--</h4>
        <div class="row mt-4">
          <div class="col-lg-8 col-md-8 mb-3">
            <div class="card p-3">


              <!-- Tabs -->
              <ul class="nav nav-tabs" id="myTab6" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="del-faculties" data-bs-toggle="tab" data-bs-target="#delete_faculties"
                          type="button">Update Faculty</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link " id="all-faculties-tab" data-bs-toggle="tab" data-bs-target="#showfaculties"
                          type="button">Faculty Batches</button>
                </li>
              </ul>

              <!-- Tab Content -->
              <div class="tab-content p-3">
                <div class="tab-pane fade " id="showfaculties" role="tabpanel">
                  <h4 class="text-center">--Faculty & Batch Management--</h4>
                  <!-- Faculty Select -->
                  <div class="mb-4">
                    <label for="facultySelect" class="form-label fw-bold">Select Faculty</label>
                    <select id="facultySelect" class="form-select">
                      <option value="" selected disabled>-- Select Faculty --</option>
                      <option th:each="f : ${allfaculties}" th:value="${f.userId}" th:text="${f.fullName}+' (UID - '+${f.userId}+')'"></option>
                    </select>
                  </div>

                  <!-- Batches Table -->
                  <div class="card shadow-sm">
                    <div class="card-body">
                      <h5 class="card-title">Batches</h5>
                      <table class="table table-bordered table-hover mt-3">
                        <thead class="table-dark">
                        <tr>
                          <th>Batch</th>
                          <th>Course Name</th>
                          <th>Start Date</th>
                          <th>Status</th>
                          <th>Mode</th>
                        </tr>
                        </thead>
                        <tbody id="batchTableBody">
                        <tr>
                          <td colspan="5" class="text-center text-muted">Select a faculty to view batches</td>
                        </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

              <div class="tab-pane fade show active" id="delete_faculties" role="tabpanel">
                <h4 class="text-center">--Update Faculty--</h4>

                <form method="post" id="facultyUpdateForm" th:action="@{'/admin/faculty/update'}" th:object="${newUser}" enctype="multipart/form-data">

                <div class="mb-4">
                  <label for="facultySelectId" class="form-label fw-bold">Select Faculty</label>
                  <select id="facultySelectId" name="facultySelectId" class="form-select">
                    <option value="" selected disabled>-- Select Faculty --</option>
                    <option th:each="f : ${allfaculties}" th:value="${f.userId}" th:text="${f.fullName}+' (UID - '+${f.userId}+')'"></option>
                  </select>
                </div>

                <div id="facultyDetailsForm" style="display:none;">
                  <hr class="border border-success">


                    <div class="row mb-3">
                      <!-- Left side: Name & Email -->
                      <div class="col-md-8">
                        <div class="mb-3">
                          <label class="form-label">Full Name</label>
                          <input type="text" class="form-control" id="facultyName" th:value="${newUser.fullName}" name="fullName"  required>
                        </div>

                        <div class="mb-3">
                          <label class="form-label">Email</label>
                          <input type="email" class="form-control" id="facultyEmail" th:value="${newUser.email}" name="email"  required>
                        </div>

                        <div class="mb-3">
                          <label class="form-label">Contact No</label>
                          <input type="text" class="form-control" id="facultyContactNo" name="contactNo" th:value="${newUser.contactNo}"
                                 maxlength="15" required>
                        </div>

                      </div>

                      <!-- Right side: Passport Photo -->
                      <div class="col-md-4 text-center">
                        <label class="form-label">Faculty Photo</label>
                        <div class="mb-3">
                          <!-- Preview box -->
<!--                          <img id="facultyPhotoPreview"-->
<!--                               src=""-->
<!--                               alt="Faculty Photo"-->
<!--                               class="img-thumbnail mb-2 border border-success"-->
<!--                               style="width:150px; height:180px; object-fit:cover;">-->
                          <!-- Preview box --><div>
                          <img id="facultyPhotoPreview"
                               src=""
                               alt="Faculty Photo"
                               class="img-thumbnail mb-2 ms-5 border border-success"
                               style="width:150px; height:180px; object-fit:cover;display:none;">
                          <!--                            Null Picture-->
                          <div id="facultynullpic" class="passport-photo border border-2 border-success rounded ms-5" style="display:none;">
                            <i class="bi bi-person"></i>
                          </div>
                        </div>

                     </div>
                        <div>
                          <span id="enabledId" style="display:none;"><i class="bi bi-check-circle-fill status-icon" style="color:green;font-size: 1rem;">Active Profile</i></span>
                          <span id="disabledId" style="display:none;"><i class="bi bi-x-circle-fill status-icon" style="color:red;font-size: 1rem;">Inactive Profile</i></span>
                        </div>
                      </div>
                    </div>

                    <div class="mb-3">
                      <label class="form-label">Date of Birth</label>
                      <input type="date" class="form-control" id="facultyDOB" th:value="${newUser.dob}" name="dob" required>
                    </div>

                    <div class="mb-3">
                      <label class="form-label">Address</label>
                      <textarea class="form-control" th:value="${newUser.address}" id="facultyAddress" name="address" required></textarea>
                      <!--                        <input type="text" class="form-control" th:value="${newUser.address}" name="address">-->
                    </div>

                    <div class="mb-3">
                      <label class="form-label">City</label>
                      <input type="text" class="form-control" id="facultyCity" th:value="${newUser.city}" name="city" required>
                    </div>

                    <div class="mb-3">
                      <label class="form-label">Photo(Optional)</label>
                      <input type="file" class="form-control" name="facultyPhoto">
                    </div>

                    <div class="mb-3">
                      <label class="form-label">Set Status (IMPORTANT ROLE)</label>
                      <select class="form-select" name="status" id="facultyStatus" th:value="${newUser.status}" required>
                        <option value="" disabled>-- Set Status --</option>
                        <option value="true" selected>Enabled</option>
                        <option value="false">Disabled</option>
                      </select>
                    </div>

                    <div class="button">
                      <input type="reset" value="Reset">
                      <input type="submit" value="Update">
                    </div>
                </div>
                  </form>
              </div>
              </div>
            </div>
          </div>
          <!-- Right Section (Shortcuts) -->
          <div class="col-lg-4 col-md-4">
            <div class="card shadow-sm">
              <div class="card-body">
                <!-- Thymeleaf fragment for shortcuts -->
                <div th:insert="~{fragments :: shortcut}"></div>
              </div>
            </div>
          </div>
        </div>
        <div th:insert="~{fragments :: footer}"></div>
      </div>

        <!-- Course Part -->
        <div id="course-part" class="dashboard-section">
          <h3 class="text-center mt-3">--Course Management--</h3>
          <div class="row mt-4">
            <div class="col-lg-8 col-md-8 mb-3">

              <div class="card p-3">
                <!-- Tabs -->
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="batch-tab" data-bs-toggle="tab" data-bs-target="#addbatch"
                            type="button">Add New Course</button>
                  </li>

                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="fee-tab" data-bs-toggle="tab" data-bs-target="#all_courses"
                            type="button">All Courses</button>
                  </li>

<!--                  <li class="nav-item" role="presentation">-->
<!--                    <button class="nav-link" id="notifications-tab" data-bs-toggle="tab"-->
<!--                            data-bs-target="#notifications" type="button">Notifications</button>-->
<!--                  </li>-->
                </ul>

                <!-- Tab Content -->
                <div class="tab-content p-3">

                  <div class="tab-pane fade show active" id="addbatch" role="tabpanel">
                    <!--                <div class="form-container p-4">-->
                    <h4>Add New Course</h4>

                    <form method="post" th:action="@{/addcourse}" th:object="${coursedata}" class="form-div p-4">

                      <div class="form-group mb-3">
                        <label for="courseName" class="form-label"><b>Course
                          Name</b></label>
                        <input type="text" name="courseName" id="courseName" th:field="*{courseName}"
                               class="form-control" placeholder="Enter course name" required>
                        <p th:each="err : ${#fields.errors('courseName')}" th:text="${err}"
                           style="color: red; font-size: 14px; margin-top: 5px;"></p>
                      </div>

                      <div class="form-group mb-3">
                        <label for="duration" class="form-label"><b>Course
                          Duration</b></label>
<!--                        <input type="text" name="duration" id="duration" th:field="*{duration}" class="form-control"-->
<!--                               placeholder="Enter course duration(in months)">-->
                        <select id="duration" name="duration" th:field="*{duration}" class="form-select" required>
                          <option value=""   selected disabled>--Select Duration--</option>
                          <option value="10 Hours" >10 Hours</option>
                          <option value="20 Hours" >20 Hours</option>
                          <option value="30 Hours" >30 Hours</option>
                          <option value="40 Hours" >40 Hours</option>
                          <option value="50 Hours" >50 Hours</option>
                          <option value="60 Hours" >60 Hours</option>
                          <option value="70 Hours" >70 Hours</option>
                          <option value="80 Hours" >80 Hours</option>
                          <option value="90 Hours" >90 Hours</option>
                          <option value="100 Hours" >100 Hours</option>
                          <option value="120 Hours" >120 Hours</option>
                        </select>
                        <p th:each="err : ${#fields.errors('duration')}" th:text="${err}"
                           style="color: red; font-size: 14px; margin-top: 5px;"></p>
                      </div>

                      <div class="form-group mb-3">
                        <label for="feesofcourse" class="form-label"><b>Course Fee</b></label>
                        <input type="number" name="feesOfCourse" id="feesofcourse" th:field="*{feesOfCourse}" class="form-control"
                               placeholder="Enter course fee" onkeyup="calculateInstallment();" required>
                      </div>

                      <div class="form-group mb-3">
                        <label for="lumpSum" class="form-label"><b>Lumpsum
                          Amount</b></label>
                        <input type="number" name="lumpSum" id="lumpSum" th:field="*{lumpSum}" class="form-control"
                               placeholder="Enter Lumpsum amount" onkeyup="calculateInstallment();" min="0" value="0" required>
                        <p th:each="err : ${#fields.errors('lumpSum')}" th:text="${err}"
                           style="color: red; font-size: 14px; margin-top: 5px;"></p>
                      </div>

                      <div class="form-group mb-3">
                        <label for="registrationFee" class="form-label"><b>Registration Fee</b></label>
                        <input type="number" name="registrationFees" min="0" value="0" id="registrationFee" th:field="*{registrationFees}" class="form-control"
                               placeholder="Enter registration fee" onkeyup="calculateInstallment();" required>
                      </div>
                      <div id="showcourseupdatediv" style="display:none;">
                      <hr class="border border-success mb-3">

                      <div class="row mb-3">
                          <div class="col">
                            Course Fee: <span id="courseFees" class="fw-bolder"></span>
                          </div>
                        <div class="col">
                            Registration Fee: <span id="registrationFees" class="fw-bolder"></span>
                        </div>
                        <div class="col">
                          Rest amount: <span id="restFees" class="fw-bolder"></span>
                        </div>
                      </div>
                      <div class="row mb-3">

                        <div class="col d-flex flex-row">
                          <span>Make Installment:</span> <input id="makeInstallment" value="1" type="number" class="form-control" onkeyup="calculateInstallment();">
                        </div>
                        <div class="col">
                          Per Installment: <span id="perInstallment" class="fw-bolder"></span>
                        </div>
                      </div>
                        <hr class="border border-success mb-3">
                      </div>

                      <input type="hidden" name="installment" id="installment" th:field="*{installment}">
                      <input type="hidden" name="numberOfInstallments" id="numberOfInstallments" th:field="*{numberOfInstallments}">
<!--                      <input type="hidden" name="perInstallment" id="perInstallmentValue" th:field="*{perInstallment}">-->




                      <!--     Submit Button    -->
                      <div class="button">
                        <input type="reset" value="Reset">
                        <input type="submit" value="Add New Course">
                      </div>
                    </form>
                    <!--                </div>-->
                  </div>
                  <div class="tab-pane fade" id="all_courses" role="tabpanel">
                    <h4>Available Courses</h4>

                    <div class="card mb-4 shadow-sm" th:each="course : ${allcourses}">

                      <div class="card-header bg-light d-flex justify-content-between">
                        <div><h5 class="card-title" th:text="${course.courseName}"></h5></div>
                        <div>
<!--                          <button type="button" class="btn btn-sm btn-primary" th:onclick="showCourseDataForUpdate(${course.courseId});" data-bs-toggle="modal" data-bs-target="#updateCourseModal"><i class="bi bi-pencil-square me-1"></i>Edit</button>-->
                          <button type="button"
                                  class="btn btn-sm btn-primary"
                                  th:attr="onclick='showCourseDataForUpdate(' + ${course.courseId} + ');'"
                                  data-bs-toggle="modal"
                                  data-bs-target="#updateCourseModal">
                            <i class="bi bi-pencil-square me-1"></i>Edit
                          </button>

                        </div>
                      </div>
                      <div class="card-body">
                        <div class="d-flex justify-content-between">
                          <p class="card-text mb-3"><strong>Course Fee: </strong> <span th:text="${course.feesOfCourse}"></span></p>
                          <p class="card-text mb-3"><strong>Registration Fee: </strong> <span th:text="${course.registrationFees}"></span></p>
                        </div>
                        <div class="d-flex justify-content-between">
                          <p class="card-text mb-3"><strong>Lumpsum :</strong> <span th:text="${course.lumpSum}"></span></p>
                          <p class="card-text mb-3"><strong>Duration:</strong> <span th:text="${course.duration}"></span></p>
                        </div>
                        <div class="d-flex justify-content-between">
                          <p class="card-text mb-3"><strong>Number of installment :</strong> <span th:text="${course.numberOfInstallments}"></span></p>
                          <p class="card-text mb-3"><strong>Per Installment:</strong> <span th:text="${course.installment}"></span></p>
                        </div>
<!--                        <div class="mt-3 d-flex justify-content-end">-->
<!--                          -->
<!--                        </div>-->
                      </div>
                    </div>

                  </div>

                </div>
              </div>
            </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>
          <div th:insert="~{fragments :: footer}"></div>

        </div>

        <!-- Batch Part -->
        <div id="batch-part" class="dashboard-section">
          <h3 class="text-center mt-3">--Batch Management--</h3>
          <div class="row mt-4">
            <div class="col-lg-8 col-md-8 mb-3">
              <div class="card p-3">
                <!-- Tabs -->
                <ul class="nav nav-tabs" id="myTab4" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="newbatch-tab" data-bs-toggle="tab" data-bs-target="#addnewbatch"
                            type="button">Add New Batch</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="batchupdate-tab" data-bs-toggle="tab" data-bs-target="#update_batch"
                            type="button">Update Batch</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link " id="batch-all-tab" data-bs-toggle="tab" data-bs-target="#allbatches"
                            type="button">All Batches</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="assign-batch" data-bs-toggle="tab" data-bs-target="#assignbatch"
                            type="button">Assign Batches</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="assigned-student" data-bs-toggle="tab" data-bs-target="#assigned_students"
                            type="button">Assigned Students</button>
                  </li>
<!--                  <li class="nav-item" role="presentation">-->
<!--                    <button class="nav-link" id="batchnotifications-tab" data-bs-toggle="tab"-->
<!--                            data-bs-target="#batch_notifications" type="button">Notifications</button>-->
<!--                  </li>-->

                </ul>

                <!-- Tab Content -->
                <div class="tab-content p-3">
                  <div class="tab-pane fade" id="allbatches" role="tabpanel">
                    <h4 class="text-center">All Available Batches</h4>
<!--                    <div class="row">-->
<!--                      <div class="" >-->
                        <div class="card mb-4 shadow-sm" th:each="b : ${allbatches}">

                            <div class="card-header bg-light d-flex justify-content-between">
                            <div><h4 class="card-title" th:text="${b.name}">Batch Name</h4></div>
                              <div>
                                <span class="badge bg-success" th:if="${b.status}=='ACTIVE'">Active</span>
                                <span class="badge rounded-pill bg-danger" th:unless="${b.status}=='ACTIVE'">Archived</span>
                              </div>
                            </div>
                          <div class="card-body">
                            <div class="d-flex justify-content-between">
                              <p class="card-text mb-1"><strong>Time:</strong> <span th:text="${#temporals.format(b.startDate,'hh:mm a')}">10:00 AM</span></p>
                              <p class="card-text mb-3"><strong>Mode:</strong> <span th:text="${b.mode}">Online</span></p>
                            </div>
                            <div class="d-flex justify-content-between">
                            <p class="card-text mb-1"><strong>Start Date:</strong> <span th:text="${#temporals.format(b.startDate,'dd-MM-yyyy')}">01-01-2025</span></p>
                              <p class="card-text mb-1"><strong>Faculty:</strong> <span th:text="${b.faculty.fullName}"></span></p>

                            </div>
                            <div class="mt-3 d-flex justify-content-end">
<!--                              <a th:href="@{'admin/batch/edit/' + ${b.batchId}}" class="btn btn-sm btn-warning"><i class="bi bi-pencil-square me-1"></i>Edit</a>-->
                            </div>
                          </div>
<!--                        </div>-->
                      </div>
                  </div>
                  <div class="tab-pane fade show active" id="addnewbatch" role="tabpanel">
                    <h4 class="text-center">Add New Batch</h4>
                    <form method="post" th:action="@{'/admin/assign'}" th:object="${newbatch}">
                      <div class="mb-3">
                        <label for="batch" class="form-label">Batch Name</label>
                        <input type="text" id="batch" name="name" class="form-control" required>
                      </div>
                      <div class="mb-3">
                        <label for="course" class="form-label">Course</label>
                        <select id="course" name="courseId" class="form-select" required>
                          <option selected disabled value="">Select a Course</option>
                          <option th:each="c : ${allcourses}" th:value="${c.courseId}" th:text="${c.courseName}"></option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="faculty" class="form-label">Faculty</label>
                        <select id="faculty" name="userId" class="form-select" required>
                          <option selected disabled value="">Select a Faculty</option>
                          <option th:each="f : ${allfaculties}" th:value="${f.userId}" th:text="${f.fullName}+' (UID - '+${f.userId}+')'"></option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="mode" class="form-label">Mode</label>
                        <select id="mode" name="mode" class="form-select">
                          <option value="Offline">Offline</option>
                          <option value="Online">Online</option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="start" class="form-label">Start from</label>
                        <input type="datetime-local" id="start" name="startDate" class="form-control" required>
                      </div>
                      <div class="button">
                        <input type="reset" value="Reset">
                        <input type="submit" value="Add Batch">
                      </div>
                    </form>
                  </div>
                  <div class="tab-pane fade" id="update_batch" role="tabpanel">
                    <h4 class="text-center">Update Batch</h4>
                    <form method="post" th:action="@{'/admin/batch/update'}" >
                      <div class="mb-3">
                        <label for="batch" class="form-label">Select a batch to update</label>
<!--                        <input type="text" id="batch2" name="name" class="form-control" required>-->
                        <select id="allBatchesList" name="batchId" class="form-select" required>
                          <option value="" selected disabled >--Select a batch to update--</option>
                          <option th:each="batch : ${allbatches}" th:value="${batch.batchId}" th:text="${batch.name}+' (Faculty - '+${batch.faculty.fullName}+')'"></option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="course2" class="form-label">Course</label>
                        <select id="course2" name="courseId" class="form-select" required>
                          <option selected disabled value="">Select a Course</option>
                          <option th:each="c : ${allcourses}" th:value="${c.courseId}" th:text="${c.courseName}"></option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="faculty2" class="form-label">Faculty</label>
                        <select id="faculty2" name="userId" class="form-select" required>
                          <option selected disabled value="">Select a Faculty</option>
                          <option th:each="f : ${allfaculties}" th:value="${f.userId}" th:text="${f.fullName}+' (UID - '+${f.userId}+')'"></option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="mode2" class="form-label">Mode</label>
                        <select id="mode2" name="mode" class="form-select" required>
                          <option value="Offline">Offline</option>
                          <option value="Online">Online</option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="start2" class="form-label">Start from</label>
                        <input type="datetime-local" id="start2" name="startDate" class="form-control" required>
                      </div>
                      <div class="mb-3">
                        <label for="status" class="form-label">Status</label>
                        <select id="status" name="status" class="form-select" required>
                          <option value="" selected disabled>--Select a batch status</option>
                          <option value="ACTIVE">Active</option>
                          <option value="ARCHIVED">Archived</option>
                        </select>
                      </div>
                      <div class="button">
                        <input type="reset" value="Reset">
                        <input type="submit" value="Update Batch">
                      </div>
                    </form>
                  </div>
                  <div class="tab-pane fade"  role="tabpanel" id="assignbatch">
                    <h4 class="text-center mb-4">Assign Students to Batch</h4>

                    <form id="studentBatchForm" method="POST" th:action="@{'/admin/studentbatch/save'}">
                      <!-- Batch Dropdown -->
                      <div class="mb-3">
                        <label for="batchId" class="form-label">Select Batch</label>
                        <select class="form-select" id="batchId" name="batchId" required>
                          <option value="" selected disabled>-- Choose Batch --</option>
<!--                          <option th:each="batch : ${allbatches}" th:value="${batch.batchId}" th:text="${batch.name}+' (Faculty - '+${batch.faculty.fullName}+')'"></option>-->
                          <option th:each="batch : ${allactivebatches}"
                                  th:value="${batch.batchId}"
                                  th:data-courseid="${batch.course.courseId}"
                                  th:text="${batch.name}+' (Faculty - '+${batch.faculty.fullName}+')'">
                          </option>

                        </select>
                      </div>

                      <!-- Multi Select Students -->
                      <div class="mb-3">
                        <label for="admissionIds" class="form-label">Select Students</label>
                        <select class="form-select" id="admissionIds" name="admissionIds" multiple required>
                        </select>
                        <div class="form-text">Hold Ctrl (Windows) or Command (Mac) to select multiple students</div>
                      </div>

                      <!-- Submit -->
                      <button type="submit" class="btn btn-primary w-100">Save Mappings</button>
                    </form>
                  </div>
                  <div class="tab-pane fade" id="assigned_students" role="tabpanel">
                    <h2 class="mb-4 text-center">View Students by Batch</h2>
                    <!-- Batch Dropdown -->
                    <div class="mb-3">
                      <label for="batchSelect" class="form-label fw-bold">Select Batch</label>
                      <select id="batchSelect" class="form-select">
                        <option value="" selected disabled>-- Choose Batch --</option>
                        <option th:each="batch : ${allbatches}" th:value="${batch.batchId}" th:text="${batch.name}+' (Faculty - '+${batch.faculty.fullName}+')'"></option>
                      </select>
                    </div>

                    <!-- Students Table -->
                    <table class="table table-bordered table-striped mt-4">
                      <thead class="table-dark">
                      <tr>
                        <th>Admission ID</th>
                        <th>Student Name</th>
                        <th>Remove Student</th>
                      </tr>
                      </thead>
                      <tbody id="studentTableBody">
                      <!-- Filled dynamically -->
                      </tbody>
                    </table>
                  </div>
                  </div>
<!--                  <div class="tab-pane fade" id="batch_notifications" role="tabpanel">-->
<!--                    <h5>User Notifications</h5>-->
<!--                    <p>User Notifications list goes here.</p>-->
<!--                  </div>-->
                </div>
              </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>
          <div th:insert="~{fragments :: footer}"></div>
          </div>

        <!-- Fee Part  -->
        <div id="fee-part" class="dashboard-section">
          <h2 class="text-center mt-3">--Fee Management--</h2>
          <div class="row mt-4">
            <div class="col-lg-8 col-md-8 mb-3">
              <div class="card p-3">
                <!-- Tabs -->
                <ul class="nav nav-tabs" id="myTab5" role="tablist">
<!--                  <li class="nav-item" role="presentation">-->
<!--                    <button class="nav-link " id="submitfee-tab" data-bs-toggle="tab" data-bs-target="#submitfee"-->
<!--                            type="button">Submit Fee</button>-->
<!--                  </li>-->
                  <li class="nav-item active" role="presentation">
                    <button class="nav-link" id="showfee-tab" data-bs-toggle="tab" data-bs-target="#showfee"
                            type="button">Show Fee</button>
                  </li>
<!--                  <li class="nav-item" role="presentation">-->
<!--                    <button class="nav-link " id="updatefee-tab" data-bs-toggle="tab" data-bs-target="#updatefee"-->
<!--                            type="button">Update Fee</button>-->
<!--                  </li>-->
<!--                  <li class="nav-item" role="presentation">-->
<!--                    <button class="nav-link" id="deletefee-tab" data-bs-toggle="tab" data-bs-target="#deletefee"-->
<!--                            type="button">Assign Batches</button>-->
<!--                  </li>-->

<!--                  <li class="nav-item" role="presentation">-->
<!--                    <button class="nav-link" id="feenotifications-tab" data-bs-toggle="tab"-->
<!--                            data-bs-target="#fee_notifications" type="button">Notifications</button>-->
<!--                  </li>-->

                </ul>

                <!-- Tab Content -->
                <div class="tab-content p-3">
<!--                  <div class="tab-pane fade " id="submitfee" role="tabpanel">-->
<!--                    <h4 class="text-center mb-4">Submit Fee</h4>-->
<!--                  </div>-->

                  <div class="tab-pane fade show active" id="showfee" role="tabpanel">
                    <h4 class="text-center">Show Fee</h4>
                    <form  class="card p-4 shadow rounded mb-4">
                      <div class="mb-3">
                        <label for="userId" class="form-label">Select an Admission</label>
                        <select class="form-select" id="feeAdmissionId" name="feeAdmission" required>
                          <option value="0" selected disabled>--Select an admission--</option>
                          <option th:each="admission : ${alladmissions}" th:value="${admission.admissionId}" th:text="${admission.userMaster.fullName}+' (AID - '+${admission.admissionId}+')'"> </option>
                        </select>
                      </div>
                    </form>
                    <h4 class="mb-3">Fee List</h4>
                    <table class="table table-bordered table-striped" id="feetable">
                      <thead>
                      <tr>
<!--                        <th>Fee ID</th>-->
                        <th>Admission ID</th>
                        <th>Course Name</th>
                        <th>Amount</th>
                        <th>Payment Date</th>
                        <th>Payment Mode</th>

<!--                        <th>Actions</th>-->
                      </tr>
                      </thead>
                      <tbody>

                      </tbody>
                    </table>
                  </div>
<!--                  <div class="tab-pane fade" id="updatefee" role="tabpanel">-->
<!--                    <h4 class="text-center">Update Fee</h4>-->
<!--                  </div>-->
<!--                  <div class="tab-pane fade" role="tabpanel" id="deletefee">-->
<!--                    <h4 class="text-center mb-4">Delete Fee</h4>-->
<!--                  </div>-->
<!--                  <div class="tab-pane fade" id="fee_notifications" role="tabpanel">-->
<!--                    <h5>User Notifications</h5>-->
<!--                    <p>User Notifications list goes here.</p>-->
<!--                  </div>-->
                </div>
              </div>
            </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>
          <div th:insert="~{fragments :: footer}"></div>
        </div>

        <!-- Project Part -->
        <div id="project-part" class="dashboard-section">
          <h4 class="text-center mt-3">--Project Management--</h4>
          <div class="row mt-4">
            <div class="col-lg-8 col-md-8 mb-3">
              <p>Here admin can track student/faculty projects.</p>
              <ul class="list-group">
                <li class="list-group-item">Festival of India - <span class="badge bg-success">Ongoing</span>
                </li>
                <li class="list-group-item">SagarJob Portal - <span class="badge bg-warning">Pending</span>
                </li>
              </ul>
            </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>
          <div th:insert="~{fragments :: footer}"></div>

        </div>

        <!-- Message Part  -->
        <div id="message-part" class="dashboard-section">
          <h4 class="text-center mt-3">--Message Management--</h4>
          <div class="row mt-4">
            <div class="col-lg-8 col-md-8 mb-3">
              <div class="list-group">
                <a href="#" class="list-group-item list-group-item-action">
                  <strong>Ashwin:</strong> Please approve my project.
                </a>
                <a href="#" class="list-group-item list-group-item-action">
                  <strong>Ayush:</strong> Assignment deadline extension?
                </a>
              </div>
            </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>
          <div th:insert="~{fragments :: footer}"></div>
        </div>

        <!-- References Part  -->
        <div id="reference-part" class="dashboard-section">
          <h4 class="text-center mt-3">--References Management--</h4>
          <div class="row mt-4">
            <div class="col-lg-8 col-md-8 mb-3">
              <ul>
                <li><a href="https://spring.io/projects/spring-boot" target="_blank">Spring Boot
                  Docs</a>
                </li>
                <li><a href="https://www.postgresql.org/docs/" target="_blank">PostgreSQL Docs</a></li>
                <li><a href="https://getbootstrap.com/" target="_blank">Bootstrap Docs</a></li>
              </ul>
            </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>

          <div th:insert="~{fragments :: footer}"></div>
        </div>

        <!-- Event Part  -->
        <div id="event-part" class="dashboard-section">
          <h3 class="text-center mt-3">--Events Management--</h3>
          <div class="row mt-4">
            <div class="col-lg-8 col-md-8 mb-3">
              <table class="table table-bordered">
                <thead class="table-dark">
                <tr>
                  <th>Event Name</th>
                  <th>Date</th>
                  <th>Location</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                  <td>Back to Bachpan (B2B)</td>
                  <td>20-09-2025</td>
                  <td>Sagar</td>
                </tr>
                <tr>
                  <td>XCL</td>
                  <td>10-10-2025</td>
                  <td>Sagar</td>
                </tr>
                </tbody>
              </table>
            </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>

          <div th:insert="~{fragments :: footer}"></div>
        </div>

    </main>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="updateCourseModal" tabindex="-1" aria-labelledby="updateCourseModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title text-center" id="updateCourseModalLabel">Update Course</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <!-- Modal Body -->
        <div class="modal-body">
          <form id="updateCourseForm" class="form-div p-3" method="post"   onsubmit="return confirm('Do you want to update?');">

            <!--                              <meta name="_csrf" th:content="${_csrf.token}" />-->
            <!--                              <meta name="_csrf_header" th:content="${_csrf.headerName}" />-->

            <input type="hidden" name="courseId" id="courseIdUpdate" >

            <div class="form-group mb-3">
              <label for="courseName" class="form-label"><b>Course Name</b></label>
              <input type="text" name="courseName" id="courseNameUpdate"
                     class="form-control" placeholder="Enter course name">
            </div>

            <div class="form-group mb-3">
              <label for="duration" class="form-label"><b>Course Duration</b></label>
              <select id="durationUpdate" name="duration"  class="form-select" required>
                <option value=""   selected disabled>--Select Duration--</option>
                <option value="10 Hours" >10 Hours</option>
                <option value="20 Hours" >20 Hours</option>
                <option value="30 Hours" >30 Hours</option>
                <option value="40 Hours" >40 Hours</option>
                <option value="50 Hours" >50 Hours</option>
                <option value="60 Hours" >60 Hours</option>
                <option value="70 Hours" >70 Hours</option>
                <option value="80 Hours" >80 Hours</option>
                <option value="90 Hours" >90 Hours</option>
                <option value="100 Hours" >100 Hours</option>
                <option value="120 Hours" >120 Hours</option>
              </select>
            </div>

            <div class="form-group mb-3">
              <label for="courseFeeUpdate" class="form-label"><b>Course Fee</b></label>
              <input type="number" name="feesOfCourse" id="courseFeeUpdate"
                     class="form-control" onkeyup="calculateInstallment2();"  placeholder="Enter course fee">
            </div>

            <div class="form-group mb-3">
              <label for="lumpsumUpdate" class="form-label"><b>Lumpsum Amount</b></label>
              <input type="number" name="lumpSum" id="lumpsumUpdate"
                     class="form-control" placeholder="Enter lumpsum amount">
            </div>

            <div class="form-group mb-3">
              <label for="registrationFeeUpdate" class="form-label"><b>Registration Fee</b></label>
              <input type="number" name="registrationFees" min="0" value="0" id="registrationFeeUpdate"  class="form-control"
                     placeholder="Enter registration fee" onkeyup="calculateInstallment2();" required>
            </div>

            <div id="showcourseupdatedivUpdate" >
              <hr class="border border-success mb-3">

              <div class="row mb-3">
                <div class="col">
                  Course Fee: <span id="courseFeesUpdate" class="fw-bolder">4600</span>
                </div>
                <div class="col">
                  Registration Fee: <span id="registrationFeesUpdate" class="fw-bolder">2000</span>
                </div>
                <div class="col">
                  Rest amount: <span id="restFeesUpdate" class="fw-bolder">2600</span>
                </div>
              </div>
              <div class="row mb-3">

                <div class="col d-flex flex-row">
                  <span>Make Installment:</span> <input id="makeInstallmentUpdate" value="1" type="number" class="form-control" onkeyup="calculateInstallment2();">
                </div>
                <div class="col">
                  Per Installment: <span id="perInstallmentUpdate" class="fw-bolder">1234</span>
                </div>
              </div>
              <hr class="border border-success mb-3">
            </div>

            <!--                                <label for="installment" class="form-label"><b>Installment Amount</b></label>-->
            <input type="hidden" name="installment" id="installmentUpdate">
            <input type="hidden" name="numberOfInstallments" id="numberOfInstallmentsUpdate">

            <div class="text-end">
              <!-- Cancel Button -->
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
              <!-- Submit Button -->
              <input type="submit" class="btn btn-success" value="Update Course">
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>
  <div id="showattendance2"></div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Custom JS -->


<!--Faculty Update Js-->
<script>
  document.getElementById("facultySelectId").addEventListener("change", function() {
     var facultyId = this.value;
     console.log("facultyId  " + facultyId);
     document.getElementById("facultyDetailsForm").style.display = "block";
     if(facultyId) {
       fetch('/faculty/data/' + facultyId)   // Call Spring Boot GET endpoint
         .then(response => response.json())
         .then(data => {
           // Display data in a Input field
           document.getElementById("facultyName").value = data.facultyName;
           document.getElementById("facultyEmail").value = data.facultyEmail;
           document.getElementById("facultyContactNo").value = data.facultyContactNo;
           document.getElementById("facultyDOB").value = data.facultyDOB;
           document.getElementById("facultyAddress").value = data.facultyAddress;
           document.getElementById("facultyCity").value = data.facultyCity;
           document.getElementById("facultyStatus").value = data.facultyStatus;
           document.getElementById("facultyPhotoPreview").src= "/userphoto/"+data.facultyId;
           if(data.facultyStatus=="true"){
            document.getElementById("enabledId").style.display="block";
            document.getElementById("disabledId").style.display="none";
            }else{
            document.getElementById("enabledId").style.display="none";
            document.getElementById("disabledId").style.display="block";
            }
              if(data.photo!=null){
                document.getElementById("facultyPhotoPreview").style.display="block";
                document.getElementById("facultynullpic").style.display="none";
            }else{
                 document.getElementById("facultyPhotoPreview").style.display="none";
                document.getElementById("facultynullpic").style.display="block";
            }

         })
         .catch(error => console.error('Error:', error));
     } else {
       // Reset fields if no admission selected
     }
   });
</script>

<!--Student Update Js-->
<script>
  document.getElementById("studentSelectId").addEventListener("change", function() {
     var studentId = this.value;
     console.log("studentId  " + studentId);
     document.getElementById("studentDetailsForm").style.display = "block";
     if(studentId) {
       fetch('/faculty/data/' + studentId)   // Call Spring Boot GET endpoint
         .then(response => response.json())
         .then(data => {
           // Display data in a Input field
           document.getElementById("studentName").value = data.facultyName;
           document.getElementById("studentEmail").value = data.facultyEmail;
           document.getElementById("studentContactNo").value = data.facultyContactNo;
           document.getElementById("studentDOB").value = data.facultyDOB;
           document.getElementById("studentAddress").value = data.facultyAddress;
           document.getElementById("studentCity").value = data.facultyCity;
           document.getElementById("studentStatus").value = data.facultyStatus;
           document.getElementById("studentPhotoPreview").src= "/userphoto/"+data.facultyId;
           if(data.facultyStatus=="true"){
            document.getElementById("enabledId1").style.display="block";
            document.getElementById("disabledId1").style.display="none";
            }else{
            document.getElementById("enabledId1").style.display="none";
            document.getElementById("disabledId1").style.display="block";
            }

            if(data.photo!=null){
                document.getElementById("studentPhotoPreview").style.display="block";
                document.getElementById("studentnullpic").style.display="none";
            }else{
                 document.getElementById("studentPhotoPreview").style.display="none";
                document.getElementById("studentnullpic").style.display="block";
            }

         })
         .catch(error => console.error('Error:', error));
     } else {
       // Reset fields if no admission selected
     }
   });
</script>


<!--Nav link JS-->
<script>

  document.addEventListener('DOMContentLoaded', function () {
  // ✅ Select only dashboard sections (exclude modals)
  const navLinks = document.querySelectorAll('#sidebarMenu .nav-link');
  const sections = document.querySelectorAll('#dashboardContent .dashboard-section');
  const sidebar = document.getElementById('sidebarMenu'); // added for mobile collapse

  // ✅ Function to activate a section and optionally a tab within it
  function activateSection(sectionId, tabId = null) {
    // If any Bootstrap modal is open, do nothing
    if (document.querySelector('.modal.show')) return;

    // Remove active from all main links and sections
    navLinks.forEach(link => link.classList.remove('active'));
    sections.forEach(section => {
      section.classList.remove('active');
      section.classList.remove('show');
    });

    // Activate target section
    const targetLink = document.querySelector(`#sidebarMenu .nav-link[href='#${sectionId}']`);
    const targetSection = document.getElementById(sectionId);

    if (targetLink && targetSection) {
      targetLink.classList.add('active');
      targetSection.classList.add('active');
      targetSection.classList.add('show');

      // Handle tab activation if tabId provided
      if (tabId) {
        const tabButton = targetSection.querySelector(`button[data-bs-target='#${tabId}']`);
        const tabPane = targetSection.querySelector(`#${tabId}`);

        if (tabButton && tabPane) {
          const allTabButtons = targetSection.querySelectorAll('[data-bs-toggle="tab"]');
          const allTabPanes = targetSection.querySelectorAll('.tab-pane');

          allTabButtons.forEach(btn => btn.classList.remove('active'));
          allTabPanes.forEach(pane => {
            pane.classList.remove('active');
            pane.classList.remove('show');
          });

          tabButton.classList.add('active');
          tabPane.classList.add('active');
          tabPane.classList.add('show');
        }
      }
    }
  }

  // ✅ Sidebar link click handling
  navLinks.forEach(link => {
    link.addEventListener('click', function (e) {
      e.preventDefault();

      // Skip if a modal is open
      if (document.querySelector('.modal.show')) return;

      const sectionId = this.getAttribute('href').substring(1);
      activateSection(sectionId);

      // ✅ Collapse sidebar on mobile screens (added)
      if (window.innerWidth < 992 && sidebar) {
        const collapseInstance = bootstrap.Collapse.getInstance(sidebar) || new bootstrap.Collapse(sidebar);
        if (sidebar.classList.contains('show')) {
          collapseInstance.hide();
        }
      }

      // ✅ Update the URL hash
      history.replaceState(null, null, `#${sectionId}`);
    });
  });

  // ✅ Tab click handling inside sections
  document.addEventListener('click', function (e) {
    if (e.target.matches('[data-bs-toggle="tab"]')) {
      const tabId = e.target.getAttribute('data-bs-target').substring(1);
      const currentSection = e.target.closest('.dashboard-section');

      if (currentSection) {
        const sectionId = currentSection.id;
        history.replaceState(null, null, `#${sectionId}#${tabId}`);
      }
    }
  });

  // ✅ Parse URL hash for navigation
  function parseAndActivateHash() {
    // Do not change anything if modal is open
    if (document.querySelector('.modal.show')) return;

    const hash = window.location.hash.substring(1); // Remove #
    if (hash) {
      const parts = hash.split('#');
      const sectionId = parts[0];
      const tabId = parts[1] || null;
      activateSection(sectionId, tabId);
    } else {
      activateSection('home');
    }
  }

  // Initial load
  parseAndActivateHash();

  // Handle browser back/forward
  window.addEventListener('hashchange', parseAndActivateHash);
});


  /*

  document.addEventListener('DOMContentLoaded', function () {
    // ✅ Select only dashboard sections (exclude modals)
    const navLinks = document.querySelectorAll('#sidebarMenu .nav-link');
    const sections = document.querySelectorAll('#dashboardContent .dashboard-section');

    // ✅ Function to activate a section and optionally a tab within it
    function activateSection(sectionId, tabId = null) {
      // If any Bootstrap modal is open, do nothing
      if (document.querySelector('.modal.show')) return;

      // Remove active from all main links and sections
      navLinks.forEach(link => link.classList.remove('active'));
      sections.forEach(section => {
        section.classList.remove('active');
        section.classList.remove('show');
      });

      // Activate target section
      const targetLink = document.querySelector(`#sidebarMenu .nav-link[href='#${sectionId}']`);
      const targetSection = document.getElementById(sectionId);

      if (targetLink && targetSection) {
        targetLink.classList.add('active');
        targetSection.classList.add('active');
        targetSection.classList.add('show');

        // Handle tab activation if tabId provided
        if (tabId) {
          const tabButton = targetSection.querySelector(`button[data-bs-target='#${tabId}']`);
          const tabPane = targetSection.querySelector(`#${tabId}`);

          if (tabButton && tabPane) {
            const allTabButtons = targetSection.querySelectorAll('[data-bs-toggle="tab"]');
            const allTabPanes = targetSection.querySelectorAll('.tab-pane');

            allTabButtons.forEach(btn => btn.classList.remove('active'));
            allTabPanes.forEach(pane => {
              pane.classList.remove('active');
              pane.classList.remove('show');
            });

            tabButton.classList.add('active');
            tabPane.classList.add('active');
            tabPane.classList.add('show');
          }
        }
      }
    }

    // ✅ Sidebar link click handling
    navLinks.forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();

        // Skip if a modal is open
        if (document.querySelector('.modal.show')) return;

        const sectionId = this.getAttribute('href').substring(1);
        activateSection(sectionId);

        history.replaceState(null, null, `#${sectionId}`);
      });
    });

    // ✅ Tab click handling inside sections
    document.addEventListener('click', function (e) {
      if (e.target.matches('[data-bs-toggle="tab"]')) {
        const tabId = e.target.getAttribute('data-bs-target').substring(1);
        const currentSection = e.target.closest('.dashboard-section');

        if (currentSection) {
          const sectionId = currentSection.id;
          history.replaceState(null, null, `#${sectionId}#${tabId}`);
        }
      }
    });

    // ✅ Parse URL hash for navigation
    function parseAndActivateHash() {
      // Do not change anything if modal is open
      if (document.querySelector('.modal.show')) return;

      const hash = window.location.hash.substring(1); // Remove #
      if (hash) {
        const parts = hash.split('#');
        const sectionId = parts[0];
        const tabId = parts[1] || null;
        activateSection(sectionId, tabId);
      } else {
        activateSection('home');
      }
    }

    // Initial load
    parseAndActivateHash();

    // Handle browser back/forward
    window.addEventListener('hashchange', parseAndActivateHash);
  });
*/

/*

  document.addEventListener('DOMContentLoaded', function () {
    const navLinks = document.querySelectorAll('#sidebarMenu .nav-link');
    const sections = document.querySelectorAll('.dashboard-section');

    // Function to activate a section and optionally a tab within it
    function activateSection(sectionId, tabId = null) {
        // Remove active from all main links and sections
        navLinks.forEach(l => l.classList.remove('active'));
        sections.forEach(section => {
            section.classList.remove('active');
            section.classList.remove('show');
        });

        // Find and activate the main section
        const targetLink = document.querySelector(`#sidebarMenu .nav-link[href='#${sectionId}']`);
        const targetSection = document.getElementById(sectionId);

        if (targetLink && targetSection) {
            targetLink.classList.add('active');
            targetSection.classList.add('active');
            targetSection.classList.add('show');

            // If there's a tab ID, activate that tab within the section
            if (tabId) {
                const tabButton = targetSection.querySelector(`button[data-bs-target='#${tabId}']`);
                const tabPane = targetSection.querySelector(`#${tabId}`);

                if (tabButton && tabPane) {
                    // Remove active from all tabs in this section
                    const allTabButtons = targetSection.querySelectorAll('.nav-link');
                    const allTabPanes = targetSection.querySelectorAll('.tab-pane');

                    allTabButtons.forEach(btn => btn.classList.remove('active'));
                    allTabPanes.forEach(pane => {
                        pane.classList.remove('active');
                        pane.classList.remove('show');
                    });

                    // Activate the target tab
                    tabButton.classList.add('active');
                    tabPane.classList.add('active');
                    tabPane.classList.add('show');
                }
            }
        }
    }

    // Handle sidebar clicks
    navLinks.forEach(link => {
        link.addEventListener('click', function (e) {
            e.preventDefault();
            const sectionId = this.getAttribute('href').substring(1);
            activateSection(sectionId);

            // Update the URL hash
            history.replaceState(null, null, `#${sectionId}`);
        });
    });

    // Handle tab clicks within sections (for nested tabs)
    document.addEventListener('click', function(e) {
        if (e.target.matches('[data-bs-toggle="tab"]')) {
            const tabId = e.target.getAttribute('data-bs-target').substring(1);
            const currentSection = e.target.closest('.dashboard-section');

            if (currentSection) {
                const sectionId = currentSection.id;
                // Update URL to show section#tab
                history.replaceState(null, null, `#${sectionId}#${tabId}`);
            }
        }
    });

    // Parse hash on page load (supports #section or #section#tab)
    function parseAndActivateHash() {
        const hash = window.location.hash.substring(1); // Remove #

        if (hash) {
            const parts = hash.split('#');
            const sectionId = parts[0];
            const tabId = parts[1] || null;

            activateSection(sectionId, tabId);
        } else {
            activateSection('home');
        }
    }

    // Initial load
    parseAndActivateHash();

    // Handle browser back/forward
    window.addEventListener('hashchange', parseAndActivateHash);
});

  */


</script>
<script>
 /* document.addEventListener('DOMContentLoaded', function () {
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('.dashboard-section');
    const sidebar = document.getElementById('sidebarMenu');

    navLinks.forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();

        // Remove active from all links and sections
        navLinks.forEach(l => l.classList.remove('active'));
        sections.forEach(section => section.classList.remove('active'));

        // Add active to clicked link + show section
        this.classList.add('active');
        const targetId = this.getAttribute('href').substring(1);
        document.getElementById(targetId)?.classList.add('active');

        // Collapse sidebar if on small screen
        if (window.innerWidth < 992 && sidebar) {
          const collapseInstance = bootstrap.Collapse.getOrCreateInstance(sidebar);
          collapseInstance.hide();
        }
      });
    });

    // Show default section
    document.querySelector('.dashboard-section.active')?.classList.add('active');
  }); */
</script>

<!--Show all material-->
<script>


  document.getElementById("show_courseMaterial").addEventListener("change", function() {
      let courseId = this.value;
      let tableBody = document.getElementById("materialTableBody");
      document.getElementById("materialTable").style.display="block";
    console.log("Course Id is "+courseId);
      tableBody.innerHTML = "";

      if (!courseId) {
          tableBody.innerHTML = `<tr><td colspan="5" class="text-center text-muted">Select a course to view study material</td></tr>`;
          return;
      }

      fetch("/admin/course/material/"+courseId) // Spring Boot endpoint returning JSON
          .then(response => response.json())
          .then(pdfs => {
              tableBody.innerHTML = "";

              if (pdfs.length === 0) {
                  tableBody.innerHTML = `<tr><td colspan="5" class="text-center text-danger">No study material found</td></tr>`;
                  return;
              }
              let count=1;
              pdfs.forEach(pdf => {
                  let row = `
                      <tr>
                          <td>${count++}</td>
                          <td>${pdf.documentName}</td>
                          <td>${pdf.uploadedAt}</td>
                          <td>
                          <a href="/admin/view/${pdf.pdfId}" class="btn btn-sm btn-outline-success mb-3 mb-lg-0 mb-sm-0">View</a>
                          <a href="/admin/delete/material/${pdf.pdfId}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Do you want to delete this pdf?')">Delete</a>
                          </td>
                      </tr>
                  `;
                  tableBody.innerHTML += row;
              });
          })
          .catch(error => {
              console.error("Error fetching batches:", error);
              tableBody.innerHTML = `<tr><td colspan="5" class="text-center text-danger">Error loading batches</td></tr>`;
          });
  });

</script>

<!--JS for fee category div-->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const lumpsumRadio = document.getElementById("feeLumpsum");
    const installmentsRadio = document.getElementById("feeInstallments");
    const lumpsumDiv = document.getElementById("lumpsumFeeCategory");
    const installmentsDiv = document.getElementById("installmentsFeeCategory");

    // Listen for change on both radios
    lumpsumRadio.addEventListener("change", function () {
      if (this.checked) {
        lumpsumDiv.style.display = "block";
        installmentsDiv.style.display = "none";
      }
    });

    installmentsRadio.addEventListener("change", function () {
      if (this.checked) {
        installmentsDiv.style.display = "block";
        lumpsumDiv.style.display = "none";
      }
    });
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const paid = document.getElementById("paid");
    const notpaid = document.getElementById("notpaid");
    const paymentModeDiv = document.getElementById("paymentModeDiv");
    const cashRadio = document.getElementById('cash');
    const onlineRadio = document.getElementById('online');


    // Listen for change on both radios
    paid.addEventListener("change", function () {
      if (this.checked) {
        paymentModeDiv.style.display = "block";
        cashRadio.required = true;
        onlineRadio.required = true;
      }
    });

    notpaid.addEventListener("change", function () {
      if (this.checked) {
        paymentModeDiv.style.display = "none";
         cashRadio.required = false;
          onlineRadio.required = false;
      }
    });
  });
</script>



<!--Show all batches-->
<script>

  document.getElementById("facultySelect").addEventListener("change", function() {
      let facultyId = this.value;
      let tableBody = document.getElementById("batchTableBody");

      tableBody.innerHTML = "";

      if (!facultyId) {
          tableBody.innerHTML = `<tr><td colspan="5" class="text-center text-muted">Select a faculty to view batches</td></tr>`;
          return;
      }

      fetch("/admin/batch/faculty/" + facultyId + "/batches") // Spring Boot endpoint returning JSON
          .then(response => response.json())
          .then(batches => {
              tableBody.innerHTML = "";

              if (batches.length === 0) {
                  tableBody.innerHTML = `<tr><td colspan="5" class="text-center text-danger">No batches found</td></tr>`;
                  return;
              }

              batches.forEach(b => {
              let color = b.status === 'ACTIVE' ? 'green' : 'red';
                  let row = `
                      <tr>
                          <td>${b.batchName}</td>
                          <td>${b.courseName}</td>
                          <td>${b.startDate}</td>
                           <td style="color:${color};">${b.status}</td>
                          <td>${b.mode}</td>
                      </tr>
                  `;
                  tableBody.innerHTML += row;
              });
          })
          .catch(error => {
              console.error("Error fetching batches:", error);
              tableBody.innerHTML = `<tr><td colspan="5" class="text-center text-danger">Error loading batches</td></tr>`;
          });
  });

</script>

<!--Change Course get Data-->
<script>
  document.getElementById("course_id").addEventListener("change", function() {
     var courseId = this.value;
    //  console.log("Course id "+courseId);
    const feeLumpsum =  document.getElementById('feeLumpsum');
    const feeInstallments = document.getElementById('feeInstallments');
    const paid = document.getElementById('paid');
    const notPaid = document.getElementById('notpaid');
     if(courseId) {
     document.getElementById('feeCategoryDiv').style.display="block";
     feeLumpsum.required = true;
     feeInstallments.required = true;
     paid.required = true;
     notPaid.required = true;
       fetch('/coursefees/' + courseId)   // Call Spring Boot GET endpoint
         .then(response => response.json()) // Either JSON OR TEXT.
         .then(data => {
           // Display data in a Input field
          // document.getElementById("fees").value = data;
          document.getElementById('courseFees3').innerHTML = data.courseFee;
          document.getElementById('registrationFees3').innerHTML = data.registrationFee;
          document.getElementById('registrationFeesFunction').value = data.registrationFee;
          document.getElementById('makeInstallment3').value = data.numberOfInstallments;
          document.getElementById('perInstallment3').value = data.installmentAmount;
            document.getElementById('courseFeeFromDatabase').innerHTML= data.courseFee;
           document.getElementById('lumpsumFeeFromDatabase').value = data.lumpsum;

           // Hidden value for calculate installment
           document.getElementById('courseFeeFunction').value = data.courseFee;
         //  document.getElementById('courseRegistrationFee').value = data.registrationFee;
         //  document.getElementById('courseNumberOfInstallments').value = data.numberOfInstallments;

           calculateInstallment3();


         })
         .catch(error => console.error('Error:', error));
     } else {
       document.getElementById("fees").value = '0.0';
     }
   });
</script>

<!--Update Admission JS-->
<script>
/*  document.getElementById("course_id1").addEventListener("change", function() {
    var courseId = this.value;
     console.log("Course id "+courseId);
    if(courseId) {
      fetch('/coursefees/' + courseId)   // Call Spring Boot GET endpoint
        .then(response => response.text()) // Either JSON OR TEXT.
        .then(data => {
          // Display data in a Input field
          document.getElementById("fees1").value = data;
          document.getElementById("balance1").value = document.getElementById("fees1").value - document.getElementById("discount1").value  ;
        })
        .catch(error => console.error('Error:', error));
    } else {
      document.getElementById("fees1").value = '0.0';
    }
  });  */
</script>


<script>
 /* document.getElementById("admissionID").addEventListener("change", function() {
     var admissionId = this.value;
     console.log("Admission id " + admissionId);

     if(admissionId) {
       fetch('/admissiondetail/' + admissionId)   // Call Spring Boot GET endpoint
         .then(response => response.json())
         .then(data => {
           // Display data in a Input field
           document.getElementById("course_id1").value = data.courseId;
           document.getElementById("fees1").value = data.fees;
           document.getElementById("discount1").value = data.discount;
           document.getElementById("balance1").value = data.balance;

         })
         .catch(error => console.error('Error:', error));
     } else {
       // Reset fields if no admission selected
       document.getElementById("course_id1").value = "";
       document.getElementById("fees1").value = "";
       document.getElementById("discount1").value = "";
     }
   });  */
</script>

<script>
  document.getElementById("allBatchesList").addEventListener("change", function() {
     var batchId = this.value;
     console.log("Batch id " + batchId);

     if(batchId) {
       fetch('/admin/batch/batchdetail/' + batchId)   // Call Spring Boot GET endpoint
         .then(response => response.json())
         .then(data => {
           // Display data in a Input field
           document.getElementById("course2").value = data.courseId;
           document.getElementById("faculty2").value = data.facultyId;
           document.getElementById("mode2").value = data.mode;
           document.getElementById("status").value = data.status;
           document.getElementById("start2").value = data.startDate.substring(0,16);
            console.log("Batch status " + data.status);
         })
         .catch(error => console.error('Error:', error));
     } else {
       // Reset fields if no admission selected
       document.getElementById("course2").value = "";
       document.getElementById("faculty2").value = "";
       document.getElementById("mode2").value = "";
       document.getElementById("status").value = "";
       document.getElementById("start2").value = "";
     }
   });
</script>

<script>
  document.getElementById("feeAdmissionId").addEventListener("change", function() {
   let admissionId = this.value;

   if(admissionId) {
     fetch("/fees/feelist/admission/" + admissionId) // Spring Boot endpoint returning JSON
       .then(response => response.json())
       .then(data => {
         let tbody = document.querySelector("#feetable tbody");
         tbody.innerHTML = "";

         if(data.length === 0) {
           tbody.innerHTML = "<tr><td colspan='4' class='text-center text-muted'>No Fee found</td></tr>";
           return;
         }

         data.forEach(fee => {
           let row = `
             <tr>
               <td>${fee.admissionId}</td>
               <td>${fee.courseName}</td>
               <td>${fee.amount}</td>
               <td>${fee.paymentDate}</td>
               <td>${fee.paymentMode}</td>
             </tr>
           `;
           tbody.innerHTML += row;
         });
       })
       .catch(error => console.error("Error fetching admissions:", error));
   }
 });

</script>

<script>
  document.getElementById("userId").addEventListener("change", function() {
    let userId = this.value;

    if(userId) {
      fetch("/admissions/" + userId) // Spring Boot endpoint returning JSON
        .then(response => response.json())
        .then(data => {
          let tbody = document.querySelector("#admissionsTable tbody");
          tbody.innerHTML = "";

          if(data.length === 0) {
            tbody.innerHTML = "<tr><td colspan='4' class='text-center text-muted'>No admissions found</td></tr>";
            return;
          }

          data.forEach(admission => {
            let row = `
              <tr>
                <td>${admission.admissionId}</td>
                <td>${admission.courseName}</td>
                <td>${admission.batchName}</td>
                <td>${admission.admissionDate}</td>
              </tr>
            `;
            tbody.innerHTML += row;
          });
        })
        .catch(error => console.error("Error fetching admissions:", error));
    }
  });

  document.getElementById("userId2").addEventListener("change", function() {
    let userId = this.value;
    document.getElementById("alldetailofstudent").style.display="block";
    if(userId) {
      fetch("/admissions/" + userId) // Spring Boot endpoint returning JSON
        .then(response => response.json())
        .then(data => {
          let tbody = document.querySelector("#admissionsTable2 tbody");
          tbody.innerHTML = "";

          if(data.length === 0) {
            tbody.innerHTML = "<tr><td colspan='4' class='text-center text-muted'>No admissions found</td></tr>";
            return;
          }

          data.forEach(admission => {
            let row = `
              <tr>
                <td>${admission.admissionId}</td>
                <td>${admission.courseName}</td>
                <td>${admission.batchName}</td>
                <td>${admission.admissionDate}</td>
              </tr>
            `;
            tbody.innerHTML += row;
          });
        })
        .catch(error => console.error("Error fetching admissions:", error));
    }
  });
</script>

<!--Update Course JS-->
<script>
  document.getElementById("updateCourseForm").addEventListener("submit", function(e) {
  // console.log("Inside updateCourseForm");

   const csrfToken = document.querySelector('meta[name="_csrf"]').getAttribute("content");
    const csrfHeader = document.querySelector('meta[name="_csrf_header"]').getAttribute("content");


  e.preventDefault();
  let formData = new FormData(this);

  fetch("/admin/updatecourse", {
      method: "POST",
      headers: {
            [csrfHeader]: csrfToken
        },
      body: formData
  })
  .then(res => res.json())
  .then(data => {
      alert(data.message); // confirmation
      const modal = bootstrap.Modal.getInstance(document.getElementById("updateCourseModal"));
        modal.hide();
      this.reset(); // clear form
      location.reload();
  });
});

</script>


<!-- Popup -->
<div id="registerPopup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
     background:rgba(0,0,0,0.5); z-index:1000; align-items:center; justify-content:center;">
  <div style="background:white; padding:20px; border-radius:10px; text-align:center;">
    <div class="loader"></div>
    <h3>⏳ Please wait...</h3>
    <p>Your form is being submitted.</p>
  </div>
</div>

<script>
  document.getElementById("registerForm").addEventListener("submit", function (event) {
   event.preventDefault(); // stop immediate submission
    let btn = document.getElementById("registerButton");
    btn.disabled = true;
    btn.value = "⏳ Processing...";

    // Show popup
    document.getElementById("registerPopup").style.display = "flex";

    setTimeout(() => {
    event.target.submit(); // submit form manually
  }, 1000);
  });
</script>

<!--For show attendance-->
<script>
  document.getElementById("getbatchid").addEventListener("change", function () {
    let batchId = this.value;

   // console.log("Batch Id " + batchId);

    if (batchId) {
     // console.log("Inside the attendance mapping");
     document.getElementById("attendancetable").style.display="block";
      let tbody = document.getElementById("showattendancetable");
      tbody.innerHTML = "";

      fetch("/getstudentsattendance/" + batchId)
        .then(res => res.json())
        .then(data => {
          if (data.length === 0) {
            tbody.innerHTML = "<tr><td colspan='5' class='text-center text-muted'>No Student Found</td></tr>";
            return;
          }

          data.forEach(student => {
            let row = `
              <tr>
                <td>
                  <button type="button" class="btn"
                          data-bs-toggle="modal"
                          data-bs-target="#modal_${student.admissionId}">
                    <span>${student.admissionId}</span>
                  </button>
                </td>

                <td>
                  <button type="button" class="btn"
                          data-bs-toggle="modal"
                          data-bs-target="#modal_${student.admissionId}">
                    <span>${student.fullName}</span>
                  </button>
                </td>

                <td data-bs-toggle="tooltip"
                    title="Present: ${student.presentCount}, Absent: ${student.absentCount}">
                  ${student.presentCount} Out Of ${student.totalAttendance}
                </td>

                <td>
                  <div class="progress" style="height: 20px;">
                    <div class="progress-bar ${student.badgeClass}"
                         style="width: ${student.percentage}%; ">
                      ${student.percentage.toFixed(2)}%
                    </div>
                  </div>
                </td>

                <td>
                  <span class="${student.badgeClass}">
                    ${student.status}
                  </span>
                </td>
              </tr>
            `;
            tbody.innerHTML += row;
          });
        });

      let showattendanceDiv = document.getElementById("showattendance2");

fetch("/getstudentsattendancefulldetails/" + batchId)
  .then(res => res.json())
  .then(data => {
    let students = data.students;
    let attendance = data.attendance;

    // Clear previous modals
    showattendanceDiv.innerHTML = "";

    if (!students || students.length === 0) {
      showattendanceDiv.innerHTML = "<tr><td colspan='5' class='text-center text-muted'>No Attendance Found</td></tr>";
      return;
    }

    //console.log("Jay Ho");

    students.forEach(student => {
      let studentAttendance = attendance.filter(att => att.admission_id === student.admissionId);
     // console.log("Size is "+studentAttendance.length);

        let rows = studentAttendance.map(att => `
        <tr>
          <td>${att.attendanceDate}</td>
          <td>${att.status}</td>
        </tr>
      `).join("");

    //  console.log("rows "+rows);

          let row = `
      <div class="modal fade" id="modal_${student.admissionId}" tabindex="-1">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Attendance for ${student.fullName}</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <table class="table table-bordered table-striped table-hover text-center align-middle">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody>
                  ${rows}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    `;

    showattendanceDiv.innerHTML += row;

    });
  });

    }
  });
</script>


<script>
  document.getElementById("batchSelect").addEventListener("change", function () {
    let batchId = this.value;
    let tbody = document.getElementById("studentTableBody");
    tbody.innerHTML = "";

    if (!batchId) return;

    fetch("/students/" + batchId)
      .then(res => res.json())
      .then(data => {
        if (data.length === 0) {
          tbody.innerHTML = "<tr><td colspan='3' class='text-center text-muted'>No students found</td></tr>";
        } else {
          let rows = data.map(student => `
            <tr>
              <td>${student.admissionId}</td>
              <td>${student.studentName}</td>
              <td>
                <form class="deleteStudentMap" method="post">
                  <input type="hidden" name="admissionId" value="${student.admissionId}">
                  <input type="hidden" name="batchId" value="${student.batchId}">
                  <button type="submit" class="btn btn-danger btn-sm">Remove</button>
                </form>
              </td>
            </tr>
          `).join("");

          tbody.innerHTML = rows;
        }
      })
      .catch(err => {
        console.error("Error fetching students:", err);
        tbody.innerHTML = "<tr><td colspan='3' class='text-center text-danger'>Error loading students</td></tr>";
      });
  });

  // 🧩 Event Delegation for dynamically created forms
  document.addEventListener("submit", function (e) {
    if (e.target.classList.contains("deleteStudentMap")) {
      e.preventDefault();

      let form = e.target;

      const csrfToken = document.querySelector('meta[name="_csrf"]').getAttribute("content");
      const csrfHeader = document.querySelector('meta[name="_csrf_header"]').getAttribute("content");

      if (!confirm("Are you sure you want to remove this student?")) return;

      let formData = new FormData(form);

      fetch("/admin/delete/student/map", {
        method: "POST",
        headers: {
          [csrfHeader]: csrfToken
        },
        body: formData
      })
        .then(res => {
          if (!res.ok) throw new Error("403 Forbidden");
          return res.json();
        })
        .then(data => {
          if (data.mapDeleted) {
            alert("✅ Student removed successfully!");
            form.closest("tr").remove(); // Remove the row instantly
           // location.reload();
          } else {
            alert("❌ Something went wrong!");
          }
        })
        .catch(err => {
          console.error("Error:", err);
          alert("⚠️ You are not authorized or session expired (403). Please refresh and try again.");
        });
    }
  });
</script>

<!--<script>-->
<!--  document.getElementById("batchSelect").addEventListener("change", function () {-->
<!--    let batchId = this.value;-->
<!--    let tbody = document.getElementById("studentTableBody");-->
<!--    tbody.innerHTML = "";-->

<!--    if (!batchId) return;-->

<!--    fetch("/students/" + batchId)-->
<!--      .then(res => res.json())-->
<!--      .then(data => {-->
<!--        if (data.length === 0) {-->
<!--          tbody.innerHTML = "<tr><td colspan='3' class='text-center text-muted'>No students found</td></tr>";-->
<!--        } else {-->
<!--          // Build all rows first (faster than += inside loop)-->
<!--          let rows = data.map(student => `-->
<!--            <tr>-->
<!--              <td>${student.admissionId}</td>-->
<!--              <td>${student.studentName}</td>-->
<!--              <td>-->
<!--                <form id="deleteStudentMap"  method="post" >-->
<!--                  <input type="hidden" name="admissionId" value="${student.admissionId}">-->
<!--                  <input type="hidden" name="batchId" value="${student.batchId}">-->
<!--                  <button type="submit" class="btn btn-danger btn-sm">Remove</button>-->
<!--                </form>-->
<!--              </td>-->
<!--            </tr>-->
<!--          `).join("");-->

<!--          tbody.innerHTML = rows;-->
<!--        }-->
<!--      })-->
<!--      .catch(err => {-->
<!--        console.error("Error fetching students:", err);-->
<!--        tbody.innerHTML = "<tr><td colspan='3' class='text-center text-danger'>Error loading students</td></tr>";-->
<!--      });-->
<!--  });-->

<!--  document.getElementById('deleteStudentMap').addEventListener("submit",function(e){-->
<!--      console.log("insdie delete student map");-->
<!--  const csrfToken = document.querySelector('meta[name="_csrf"]').getAttribute("content");-->
<!--  const csrfHeader = document.querySelector('meta[name="_csrf_header"]').getAttribute("content");-->

<!--   e.preventDefault();-->

<!--   let ans=confirm('Are you sure you want to remove this student?')-->
<!--   if(!ans) return;-->

<!--  let formData = new FormData(this);-->

<!--  fetch("/admin/delete/student/map", {-->
<!--      method: "POST",-->
<!--      headers: {-->
<!--            [csrfHeader]: csrfToken-->
<!--        },-->
<!--      body: formData-->
<!--  })-->
<!--  .then(res => res.json())-->
<!--  .then(data => {-->
<!--      if(data.mapDeleted){-->
<!--          alert('The Student has been removed from the batch!');-->
<!--      }else{-->
<!--        alert('Something went wrong!');-->
<!--      }-->


<!--  //    this.reset(); // clear form-->
<!--    //  location.reload();-->
<!--  });-->

<!--  });-->
<!--</script>-->


<!--JS for calculate installment-->
<script>

  function calculateInstallment() {
      document.getElementById('showcourseupdatediv').style.display="block";
      let courseFee = document.getElementById('feesofcourse').value;
      let registrationFee = document.getElementById('registrationFee').value;
      let lumpSum = document.getElementById('lumpSum').value;
      let varRest = document.getElementById('restFees');
      let installments = document.getElementById('perInstallment');
      let makeInstallment = document.getElementById('makeInstallment').value;

      document.getElementById('courseFees').innerHTML = courseFee;
      document.getElementById('registrationFees').innerHTML = registrationFee;
      document.getElementById('registrationFee').max = courseFee;
      document.getElementById('lumpSum').max = courseFee;

      let restAmount = courseFee - registrationFee;
      varRest.innerHTML = restAmount;

      if (makeInstallment > 0) {
          installments.innerHTML = (restAmount / makeInstallment).toFixed(2);
          document.getElementById('installment').value= (restAmount / makeInstallment).toFixed(2);
      } else {
          installments.innerHTML = "0";
          document.getElementById('installment').value= 0;
      }

      document.getElementById('numberOfInstallments').value =  makeInstallment;
     // document.getElementById('perInstallmentValue').value = (restAmount / makeInstallment).toFixed(2);
  }

   function calculateInstallment2() {
   // console.log("OK");
      let courseFee = document.getElementById('courseFeeUpdate').value;
      let registrationFee = document.getElementById('registrationFeeUpdate').value;
      let lumpSum = document.getElementById('lumpsumUpdate').value;
      let varRest = document.getElementById('restFeesUpdate');
      let installments = document.getElementById('perInstallmentUpdate');
      let makeInstallment = document.getElementById('makeInstallmentUpdate').value;

      document.getElementById('courseFeesUpdate').innerHTML = courseFee;
      document.getElementById('registrationFeesUpdate').innerHTML = registrationFee;
      document.getElementById('registrationFeeUpdate').max = courseFee;
      document.getElementById('lumpsumUpdate').max = courseFee;

      let restAmount = courseFee - registrationFee;
      varRest.innerHTML = restAmount;

      if (makeInstallment > 0) {
          installments.innerHTML = (restAmount / makeInstallment).toFixed(2);
          document.getElementById('installmentUpdate').value= (restAmount / makeInstallment).toFixed(2);
      } else {
          installments.innerHTML = "0";
          document.getElementById('installmentUpdate').value= 0;
      }

      document.getElementById('numberOfInstallmentsUpdate').value =  makeInstallment;
  }


   function calculateInstallment3() {

      let courseFee = document.getElementById('courseFeeFunction').value;
      let registrationFee = document.getElementById('registrationFeesFunction').value;
      let varRest = document.getElementById('restFees3');
      let feeDiscount=document.getElementById('feeDiscount').value;
      let installments = document.getElementById('perInstallment3');
      let makeInstallment = document.getElementById('makeInstallment3').value;

      let restAmount = (courseFee - registrationFee) - feeDiscount;
      varRest.innerHTML = restAmount ;

      if (makeInstallment > 0) {
          installments.value = (restAmount / makeInstallment).toFixed(2);
          document.getElementById('installmentUpdate').value= (restAmount / makeInstallment).toFixed(2);
      } else {
          installments.innerHTML = "0";
          document.getElementById('installmentUpdate').value= 0;
      }

     // document.getElementById('numberOfInstallmentsUpdate').value =  makeInstallment;
     // document.getElementById('perInstallmentValue').value = (restAmount / makeInstallment).toFixed(2);
  }

  async function showCourseDataForUpdate(courseId) {
      try {
          // Fetch course data from backend (JSON response)
          const response = await fetch(`/admin/courseupdatedetail/${courseId}`);
          const course = await response.json();

          // Fill modal form fields
          document.getElementById('courseIdUpdate').value = course.courseId;
          document.getElementById('courseNameUpdate').value = course.courseName;
          document.getElementById('courseFeeUpdate').value= course.courseFee;
          document.getElementById('durationUpdate').value = course.duration;
          document.getElementById('lumpsumUpdate').value = course.lumpsum;
          document.getElementById('perInstallmentUpdate').value = course.installmentAmount;
          document.getElementById('registrationFeeUpdate').value = course.registrationFee;
          document.getElementById('makeInstallmentUpdate').value = course.numberOfInstallments;

          calculateInstallment2();
      } catch (error) {
          console.error("Error loading course data:", error);
      }
  }


</script>


<script th:inline="javascript">
  /*<![CDATA[*/
  let allAdmissions = [[${alladmissions2}]];
  /*]]>*/
</script>

<script>
  document.getElementById("batchId").addEventListener("change", function () {
    let batchId = this.value;
    let courseId = this.options[this.selectedIndex].getAttribute("data-courseid");
    let admissionSelect = document.getElementById("admissionIds");
    admissionSelect.innerHTML = ""; // clear old options

    if (!batchId || !courseId) return;

    // Fetch all students already assigned to any batch of this course
    fetch("/studentbatch/students/" + batchId)
      .then(res => res.json())
      .then(assignedIds => {
        console.log("Already assigned student IDs:", assignedIds);

        // Filter only those admissions that belong to the same course
        // and are not yet assigned to any batch of this course
        let filteredAdmissions = allAdmissions.filter(admission =>
          admission.courseId == courseId &&
          !assignedIds.includes(String(admission.admissionId)) // ensure correct type match
        );

        // Sort alphabetically by student name
        filteredAdmissions.sort((a, b) => a.studentName.localeCompare(b.studentName));

        // Add filtered options to the select box
        if (filteredAdmissions.length === 0) {
          let option = document.createElement("option");
          option.text = "No students available";
          option.disabled = true;
          option.selected = true;
          admissionSelect.appendChild(option);
        } else {
          filteredAdmissions.forEach(admission => {
            let option = document.createElement("option");
            option.value = admission.admissionId;
            option.text = `${admission.studentName} (AID - ${admission.admissionId})`;
            admissionSelect.appendChild(option);
          });
        }
      })
      .catch(err => {
        console.error("Error fetching assigned students:", err);
      });
  });
</script>



<!--<script th:inline="javascript">-->
<!--  /*<![CDATA[*/-->
<!--  let allAdmissions = [[${alladmissions2}]];-->
<!--  /*]]>*/-->
<!--</script>-->

<!--<script>-->
<!--  document.getElementById("batchId").addEventListener("change", function () {-->
<!--    let batchId = this.value;-->
<!--    let courseId = this.options[this.selectedIndex].getAttribute("data-courseid");-->
<!--    let admissionSelect = document.getElementById("admissionIds");-->
<!--    admissionSelect.innerHTML = ""; // Clear previous options-->

<!--    if (!batchId) return;-->

<!--    fetch("/studentbatch/students/" + batchId)-->
<!--      .then(res => res.json())-->
<!--      .then(assignedIds => {-->
<!--        // Filter by course and exclude already assigned students-->
<!--        let filteredAdmissions = allAdmissions.filter(admission =>-->
<!--          admission.courseId == courseId && !assignedIds.includes(admission.admissionId)-->
<!--        );-->

<!--        // Sort alphabetically by student name-->
<!--        filteredAdmissions.sort((a, b) => a.studentName.localeCompare(b.studentName));-->

<!--        // Add options to select-->
<!--        filteredAdmissions.forEach(admission => {-->
<!--          let option = document.createElement("option");-->
<!--          option.value = admission.admissionId;-->
<!--          option.text = `${admission.studentName} (AID - ${admission.admissionId})`;-->
<!--          admissionSelect.appendChild(option);-->
<!--        });-->
<!--      });-->
<!--  });-->
<!--</script>-->


<script>
  function calculateNet(){
     const courseFee=document.getElementById("fees").value;
     const discount=document.getElementById("discount").value;
     const net=courseFee-discount;
     document.getElementById("balance").value = net;
  }
   function fillAdmissionDetails() {
        let select = document.getElementById("userSelect");
        let selectedOption = select.options[select.selectedIndex];
       // document.getElementById('feeDetails').style.display="block";
       const cashRadio = document.getElementById('cashFee');
        const onlineRadio = document.getElementById('onlineFee');
        const chequeRadio = document.getElementById('cheque');




        let feeCategory = selectedOption.getAttribute("data-category");

        document.getElementById('feeCategoryForFeeTable').value = feeCategory;
        let feeBtn =document.getElementById("feesubmitbutton");

        if(feeCategory=="Lumpsum"){
            console.log("Inside LumpSum div");
            document.getElementById('installmentsFeeDiv').style.display="none";
            document.getElementById('lumpsumFeeDiv').style.display="block";


            document.getElementById("feecourseName").innerHTML = selectedOption.getAttribute("data-coursename");
            document.getElementById("courseFee").innerHTML = selectedOption.getAttribute("data-coursefee");
            document.getElementById("feeCategory").innerHTML = feeCategory ;
            document.getElementById("courseLumpsumFee").innerHTML = selectedOption.getAttribute("data-lumpsumfee");
            document.getElementById('amount').value =  selectedOption.getAttribute("data-lumpsumfee");
            let feeStatus =  selectedOption.getAttribute("data-isregistrationfee") === "true";
            console.log("Registration Fee Status "+feeStatus);
            //  document.getElementById("feestatus").innerHTML = feeStatus ? "Completed" : "Pending";


            if(feeStatus){
                document.getElementById('feeAmountDiv').style.display = "none";
                document.getElementById("feestatus").innerHTML = '<span class="badge bg-success">Completed</span>';
                feeBtn.disabled = true;
                feeBtn.style.backgroundColor = "green";
                feeBtn.style.color = "white";
                feeBtn.value = "Paid";
                cashRadio.required = false;
                onlineRadio.required = false;
                chequeRadio.required = false;

            }
            else{
              document.getElementById('feeAmountDiv').style.display = "block";
              document.getElementById("feestatus").innerHTML = '<span class="badge bg-warning">Pending</span>';
              feeBtn.disabled = false;
              feeBtn.style.backgroundColor = "rgb(40, 40, 64)";
              feeBtn.style.color = "white";
              feeBtn.value = "Pay Fee"; // optional
              cashRadio.required = true;
                onlineRadio.required = true;
                chequeRadio.required = true;
            }


        }else{
          console.log("Inside the Installments");
          document.getElementById('lumpsumFeeDiv').style.display="none";
          document.getElementById('installmentsFeeDiv').style.display="block";
          cashRadio.required = true;
          onlineRadio.required = true;
          chequeRadio.required = true;


          document.getElementById('feecourseName1').innerHTML = selectedOption.getAttribute("data-coursename");
          document.getElementById('feeCategory1').innerHTML = feeCategory ;
        //  document.getElementById('registrationFee1').innerHTML = selectedOption.getAttribute("data-registrationfee");

          document.getElementById('courseFee1').innerHTML = selectedOption.getAttribute("data-coursefee");
          document.getElementById('courseDiscount').innerHTML =  selectedOption.getAttribute("data-discount");
          document.getElementById('courseNetFee').innerHTML = selectedOption.getAttribute("data-balance");

          document.getElementById('totalInstallment').innerHTML = selectedOption.getAttribute("data-numberofinstallments");
          document.getElementById('perInstallmentAmount').innerHTML = selectedOption.getAttribute("data-installment");
          document.getElementById('pendingInstallments').innerHTML =  selectedOption.getAttribute('data-pendinginstallments');
          console.log("Pending Installments "+  selectedOption.getAttribute('data-data-pendinginstallments'));

          let balanceAfterPayment = selectedOption.getAttribute('data-balanceafterpayment');
          document.getElementById('remainingAmount').innerHTML =  balanceAfterPayment;

         // console.log("Per Installment Amount "+selectedOption.getAttribute("data-installment"));

          let feeStatus =  selectedOption.getAttribute("data-isregistrationfee") === "true";


          if(feeStatus){
          console.log("Registration Fee is completed");
            document.getElementById('registrationFee1').innerHTML = selectedOption.getAttribute("data-registrationfee") + '<span class="badge bg-success">Completed</span>';
            document.getElementById('payRegistrationFee').style.display = "none";
            document.getElementById('feeAmountDiv').style.display = "block";
            document.getElementById('amount').value = selectedOption.getAttribute("data-installment");
            console.log('Balance After Payment: ' + balanceAfterPayment);
            balanceAfterPayment = parseFloat(balanceAfterPayment);
               if (balanceAfterPayment === 0  || balanceAfterPayment < 0) {
               document.getElementById('feeAmountDiv').style.display = "none";
                  feeBtn.disabled = true;
                  feeBtn.style.backgroundColor = "green";
                  feeBtn.style.color = "white";
                  feeBtn.value = "Paid";
                  cashRadio.required = false;
                  onlineRadio.required = false;
                  chequeRadio.required = false;

                }else{
                  document.getElementById('feeAmountDiv').style.display = "block";
                  document.getElementById("feestatus").innerHTML = '<span class="badge bg-warning">Pending</span>';
                  feeBtn.disabled = false;
                  feeBtn.style.backgroundColor = "rgb(40, 40, 64)";
                  feeBtn.style.color = "white";
                  feeBtn.value = "Pay Fee";
            cashRadio.required = true;
            onlineRadio.required = true;
            chequeRadio.required = true;
                }
          }else{
          console.log("Registration Fee isn't completed");
            document.getElementById('registrationFee1').innerHTML = selectedOption.getAttribute("data-registrationfee") + '<span class="badge bg-warning">Pending</span>';
            document.getElementById('payRegistrationFee').style.display = "block";
            document.getElementById('feeAmountDiv').style.display = "block";
            document.getElementById('amount').value =  selectedOption.getAttribute("data-registrationfee");
            console.log('Balance After Payment: ' + balanceAfterPayment);
              cashRadio.required = true;
            onlineRadio.required = true;
            chequeRadio.required = true;
            feeBtn.disabled = false;
                  feeBtn.style.backgroundColor = "rgb(40, 40, 64)";
                  feeBtn.style.color = "white";
                  feeBtn.value = "Pay Fee";


          }
        }

    }

  function calculateNet2(){
     const courseFee=document.getElementById("fees1").value;
     const discount=document.getElementById("discount1").value;
     const net=courseFee-discount;
     document.getElementById("balance1").value = net;
  }
</script>

<script>
  /* document.getElementById("userId").addEventListener("change", function() {
    let userId = this.value;

    if(userId) {
      fetch("/admissions/" + userId) // Spring Boot endpoint returning JSON
        .then(response => response.json())
        .then(data => {
          let tbody = document.querySelector("#admissionsTable tbody");
          tbody.innerHTML = "";

          if(data.length === 0) {
            tbody.innerHTML = "<tr><td colspan='4' class='text-center text-muted'>No admissions found</td></tr>";
            return;
          }

          data.forEach(admission => {
            let row = `
              <tr>
                <td>${admission.admissionId}</td>
                <td>${admission.courseName}</td>
                <td>${admission.batchName}</td>
                <td>${admission.admissionDate}</td>
              </tr>
            `;
            tbody.innerHTML += row;
          });
        })
        .catch(error => console.error("Error fetching admissions:", error));
    }
  });*/
</script>

</body>

</html>
