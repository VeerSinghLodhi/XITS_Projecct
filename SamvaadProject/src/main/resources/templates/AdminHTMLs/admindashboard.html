<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title>Admin || Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Lato', sans-serif;
      font-size: 0.9rem;
    }

    .sidebar {
      position: fixed;
      top: 0;
      bottom: 0;
      left: 0;
      z-index: 100;
      padding: 70px 0 0;
      box-shadow: inset -1px 0 0 rgba(0, 0, 0, 0.1);
      min-height: 100vh;
    }

    .sidebar .nav-link {
      font-weight: 500;
      color: #333;
      font-weight: bold;
      padding: 0.75rem 1rem;
      margin: 0.125rem 0;
      border-radius: 0.375rem;
      transition: all 0.3s ease;
    }

    .sidebar .nav-link:hover,
    .sidebar .nav-link.active {
      color: var(--primary-color);
      background-color: rgba(13, 110, 253, 0.1);
    }

    .sidebar .nav-link i {
      margin-right: 0.5rem;
    }

    .dashboard-section {
      display: none;
    }

    .dashboard-section.active {
      display: block;
    }

    .form-container {
      background: #fff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .btn-custom {
      background-color: #0d6efd;
      color: #fff;
      border-radius: 8px;
    }

    .btn-custom:hover {
      background-color: #0b5ed7;
    }

    /* Fonts */
    :root {
      --default-font: "Roboto", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
      --heading-font: "Raleway", sans-serif;
      --nav-font: "Poppins", sans-serif;
    }

    /* Global Colors */
    :root {
      --background-color: #ffffff;
      --default-color: #444444;
      --heading-color: #151515;
      --accent-color: #ffc451;
      --contrast-color: #312f2f;
    }

    /* Nav Menu Colors */
    :root {
      --nav-color: rgba(255, 255, 255, 0.905);
      --nav-hover-color: #ffc451;
      --nav-dropdown-background-color: #ffffff;
      --nav-dropdown-color: #212529;
      --nav-dropdown-hover-color: #ffc451;
    }

    .form-container {
      /* background: #fff; */
      border-radius: 12px;
      box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
    }

    h4 {
      font-weight: 600;
      color: #FFBB33;
    }

    /* Button Code  */

    .button {
      margin-top:30px;
      display: flex;
      justify-content: space-between;
    }

    .button input[type="submit"],
    .button input[type="reset"] {
      background-color: rgb(40, 40, 64);
      color: white;
      padding: 10px;
      width: 49%;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      outline: none;
      transition: background 0.3s ease-in-out;
    }


      .button input[type="submit"]:hover,
      .button input[type="reset"]:hover {
      background: #FFBB33;
      /* background: var(--nav-dropdown-hover-color); */
    }




    /* Popup Css */

    .popup {
      visibility: hidden;
      min-width: 250px;
      background-color: #28a745;
      /* green success */
      color: #fff;
      text-align: center;
      border-radius: 8px;
      padding: 15px;
      position: fixed;
      z-index: 1;
      left: 50%;
      bottom: 30px;
      transform: translateX(-50%);
      font-size: 19px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      opacity: 0;
      transition: opacity 0.5s ease, bottom 0.5s ease;
    }

    /* Show the popup */
    .popup.show {
      visibility: visible;
      opacity: 1;
      bottom: 50px;
    }

    .card {
      border-radius: 12px;
      box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.1);
    }

    .nav-tabs .nav-link {
      color: #000;
      font-weight: 500;
    }

    .nav-tabs .nav-link.active {
      color: #f39c12 !important;
      /* Highlighted color like your screenshot */
    }

    #all_courses .master-div {
      width: 100%;
      margin: 20px auto;
      padding: 20px;
      background-color: white;
      box-shadow: 2px 2px 15px rgba(0, 0, 0, 0.2);
      border-radius: 10px;
    }

    #all_courses .button1 {
      width: 150px;
      background-color: #ffc451;
      justify-content: center;
    }

    /*  Admission css */
    #addnewadmission .form-container {
      max-width: 700px;
      margin: 40px auto;
      padding: 25px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
    }

   /* #addnewadmission .form-title {
      text-align: center;
      font-weight: bold;
      margin-bottom: 20px;
      color: #2c3e50;
    }

     #addnewadmission .btn-custom {
      background: #3498db;
      color: white;
      font-weight: bold;
      border-radius: 8px;
    }
    #addnewadmission .btn-custom:hover {
      background: #2980b9;
    }*/

    .loader {
  border: 4px solid #f3f3f3;
  border-top: 4px solid #3498db;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  animation: spin 1s linear infinite;
  margin: auto;

}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
    .dashboard-shortcut a {
  display: inline-block;
  text-align: center;
  color: #333;
  text-decoration: none;
  transition: all 0.3s ease; /* smooth transition */
  border-radius: 8px;
  padding: 10px;
}

.dashboard-shortcut a:hover {
  background-color: #FFBB33;
  color: white;
  transform: translateY(-4px); /* slight lift effect */
}
.card.shadow-sm {
  border-radius: 15px;
  transition: transform 0.3s, box-shadow 0.3s;
}

.card.shadow-sm:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}

    footer {
    font-size: 14px;
}

footer a {
    color: #FFBB33;
    text-decoration: none;
}

footer a:hover {
    text-decoration: underline;
}

  </style>
</head>
<body>

<div id="popupMessage1" class="popup">
  ✅ Registration has been successful!
</div>
<script th:if="${newUserAdded}">
  popup = document.getElementById("popupMessage1");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage2" class="popup">
  ✅ New Course added successfully!
</div>


<script th:if="${newCourseAdded}">
  const popup = document.getElementById("popupMessage2");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage3" class="popup">
  ✅ New Batch added successfully!
</div>

<script th:if="${newBatchAdded}">
  const popup = document.getElementById("popupMessage3");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage4" class="popup">
  ✅ New Batch added successfully!
</div>

<script th:if="${newAdmissionAdded}">
  const popup = document.getElementById("popupMessage4");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage5" class="popup">
  ✅ Admission has been updated successfully!
</div>

<script th:if="${admissionUpdated}">
  const popup = document.getElementById("popupMessage5");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage6" class="popup">
  ✅ Batch has been updated successfully!
</div>

<script th:if="${batchUpdated}">
  const popup = document.getElementById("popupMessage6");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage7" class="popup">
  ✅ Students have been assigned to batch successfully!!
</div>

<script th:if="${studentsMapped}">
  const popup = document.getElementById("popupMessage7");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>

<div id="popupMessage8" class="popup">
  ✅ Fee has been submitted successfully!!
</div>

<script th:if="${feeSubmitted}">
  const popup = document.getElementById("popupMessage8");
  popup.classList.add("show");
  //Time
  setTimeout(() => {
    popup.classList.remove("show");
  }, 5000);
</script>


<!-- Navbar -->
<nav class="navbar navbar-dark sticky-top bg-light flex-md-nowrap p-2 shadow">
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center" href="#">
      <img src="../Images/xansaitsulutionsLogo.png" width="150" height="60" alt="Logo">
<!--      <span style="color:black;">-->
<!--          <i class="bi bi-person me-1"></i>-->
<!--          <span th:text="${user_master.fullName}"></span>-->
<!--        </span>-->
    </a>
    <div class="d-flex align-items-center me-5">
      <div class="dropdown">
        <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle" id="dropdownUser"
           data-bs-toggle="dropdown">
          <img th:if="${user_master.photoPath != null}" th:src="@{/userphoto}"
               class="rounded-circle me-2 shadow-sm " width="40" height="40">
          <div th:if="${user_master.photoPath == null}" >
            <i class="bi bi-person-circle rounded-circle me-2 fs-3 shadow-sm text-dark"></i>
          </div>
          <span class="d-none d-sm-inline text-dark" th:text="${user_master.fullName}"></span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="#"><i class="bi bi-person-circle me-2"></i>Profile</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" th:href="@{/logout}"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
        </ul>
      </div>
    </div>
    <button class="btn btn-outline-light d-md-none me-2" type="button" data-bs-toggle="collapse"
            data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
      <span style="color:black"><i class="bi bi-list"></i></span>
    </button>
  </div>
</nav>



<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse bg-white">
      <div class="position-sticky pt-3">
        <ul class="nav flex-column">
          <li class="nav-item"><a class="nav-link active" href="#home"><i class="bi bi-house me-2"></i>Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#student"><i class="bi bi-people me-2"></i>Registration</a>
          </li>
          <li class="nav-item"><a class="nav-link" href="#admission"><i class="bi bi-people me-2"></i>Admission</a>
          </li>
          <li class="nav-item"><a class="nav-link" href="#course-part"><i
                  class="bi bi-mortarboard me-2"></i>Course</a></li>
          <li class="nav-item"><a class="nav-link" href="#batch-part"><i class="bi bi-book me-2"></i>Batch</a></li>
          <li class="nav-item"><a class="nav-link" href="#fee-part"><i class="bi bi-currency-rupee me-2"></i>Fee</a></li>
          <li class="nav-item"><a class="nav-link" href="#project-part"><i
                  class="bi bi-folder2-open me-2"></i>Project</a></li>
          <li class="nav-item"><a class="nav-link" href="#message-part"><i
                  class="bi bi-chat-dots me-2"></i>Message</a></li>
          <li class="nav-item"><a class="nav-link" href="#reference-part"><i
                  class="bi bi-link-45deg me-2"></i>Reference</a></li>
          <li class="nav-item"><a class="nav-link" href="#event-part"><i
                  class="bi bi-calendar-check me-2"></i>Event</a></li>
          <!--          <li class="nav-item"><a class="nav-link text-danger" th:href="@{/logout}"><i-->
          <!--                  class="bi bi-box-arrow-left me-2"></i>Logout</a></li>-->
        </ul>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
        <div id="home" class="dashboard-section active">
<!--          <h4 class="mt-3">Xansa IT Solutions Dashboard</h4>-->
          <marquee behavior="scroll" direction="left" scrollamount="6" class="mt-3" style="font-weight:bold; color:#FFBB33; font-size:25px;">
            Xansa IT Solutions Dashboard
          </marquee>
          <hr>
          <div class="row mt-4">

            <!-- Left Section (Main Content) -->
            <div class="col-lg-8 col-md-8">
              <div class="card shadow-sm mb-3">
                <div class="card-body">
                  <h4>Main Content</h4>
                  <p>This area can show graphs, reports, or quick stats.</p>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <div class="card text-center shadow-sm">
                    <div class="card-body">
                      <h5>Total Students</h5>
                      <h3 th:text="${allstudents.size()}">0</h3>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <div class="card text-center shadow-sm">
                    <div class="card-body">
                      <h5>Total Courses</h5>
                      <h3 th:text="${allcourses.size()}">0</h3>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>
          <div th:insert="~{fragments :: footer}" class="d-flex align-self-end"></div>
        </div>

        <!-- New User Registration Part -->
        <div id="student" class="dashboard-section">
          <h3>Registration</h3>
          <div class="row mt-4">
            <div class="col-lg-8 col-md-8 mb-3">
              <div class="card p-3">


                <!-- Tabs -->
                <ul class="nav nav-tabs" id="myTab2" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="newuser-tab" data-bs-toggle="tab" data-bs-target="#addnewuser"
                            type="button">Add New User</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="userupdate-tab" data-bs-toggle="tab" data-bs-target="#update_user"
                            type="button">Update</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="usernotifications-tab" data-bs-toggle="tab"
                            data-bs-target="#user_notifications" type="button">Notifications</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link " id="user-tab" data-bs-toggle="tab" data-bs-target="#allusers"
                            type="button">All Users</button>
                  </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content p-3">
                  <div class="tab-pane fade" id="allusers" role="tabpanel">
                    <h5>User Profile</h5>
                    <p>All User will be show here.</p>
                  </div>
                  <div class="tab-pane fade show active" id="addnewuser" role="tabpanel">
                    <h4>Add New User</h4>
                    <!--                    <div class="form-container">-->
                    <form method="post" id="registerForm" action="/registration" th:object="${newUser}" enctype="multipart/form-data">
                      <div class="mb-3">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-control" name="fullName" th:value="${newUser.fullName}"
                               required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" name="email" th:value="${newUser.email}" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Contact No</label>
                        <input type="text" class="form-control" name="contactNo" th:value="${newUser.contactNo}"
                               maxlength="15" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Date of Birth</label>
                        <input type="date" class="form-control" th:value="${newUser.dob}" name="dob" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Address</label>
                        <textarea class="form-control" th:value="${newUser.address}" name="address" required></textarea>
<!--                        <input type="text" class="form-control" th:value="${newUser.address}" name="address">-->
                      </div>

                      <div class="mb-3">
                        <label class="form-label">City</label>
                        <input type="text" class="form-control" th:value="${newUser.city}" name="city" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Photo(Optional)</label>
                        <input type="file" class="form-control" name="userPhoto">
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Role</label>
                        <select class="form-select" name="role" th:value="${newUser.role}" required>
                          <option value="" disabled>-- Select Role --</option>
                          <option value="STUDENT" selected>Student</option>
                          <option value="FACULTY">Faculty</option>
                        </select>
                      </div>

                      <div class="button">
                        <input type="reset" value="Reset">
                        <input type="submit" id="registerButton" value="Register">
                      </div>
                    </form>
                    <!--                    </div>-->
                  </div>
                  <div class="tab-pane fade" id="update_user" role="tabpanel">
                    <h4 class="mb-3">Available User</h4>
                    <h3>Users Details to be updated here.</h3>
                  </div>
                  <div class="tab-pane fade" id="user_notifications" role="tabpanel">
                    <h5>User Notifications</h5>
                    <p>User Notifications list goes here.</p>
                  </div>
                </div>
              </div>
            </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Admission Part  -->
        <div id="admission" class="dashboard-section">
          <h3>Admissions</h3>
          <div class="row">
            <div class="col-lg-8 col-md-8">
              <div class="card p-3">
                <!-- Tabs -->
                <ul class="nav nav-tabs" id="myTab3" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="new-admission" data-bs-toggle="tab" data-bs-target="#addnewadmission"
                            type="button">New Admission</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="addfee" data-bs-toggle="tab"
                            data-bs-target="#addfees" type="button">Fee</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="update-admission" data-bs-toggle="tab"
                            data-bs-target="#update_admission" type="button">Update
                      Admission</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="admission-tab" data-bs-toggle="tab"
                            data-bs-target="#alladmission" type="button">All Admission</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="admission-notifications" data-bs-toggle="tab"
                            data-bs-target="#admission_notifications" type="button">Notifications</button>
                  </li>

                </ul>

                <!-- Tab Content -->
                <div class="tab-content p-3">
                  <div class="tab-pane fade " id="alladmission" role="tabpanel">
                    <h4>User Admission</h4>
                    <form id="userForm" class="card p-4 shadow rounded">
                      <div class="mb-3">
                        <label for="userId" class="form-label">Select User</label>
                        <select class="form-select" id="userId" name="userId" required>
                          <option value="" selected disabled>-- Select User --</option>
<!--                          <option th:each="userStudent : ${allstudentusers}" th:value="${userStudent.userId}" th:text="${userStudent.fullName} + '(UID - '+ ${userStudent.userId} + ')'}"></option>-->
                          <option th:each="userStudent : ${allstudentusers}"
                                  th:value="${userStudent.userId}"
                                  th:text="|${userStudent.fullName} (UID - ${userStudent.userId})|">
                          </option>

                          <!-- Dynamic options from backend -->
<!--                          <option value="1">User 1</option>-->
<!--                          <option value="2">User 2</option>-->
<!--                          <option value="3">User 3</option>-->
                        </select>
                      </div>
                    </form>

                    <!-- Table to show admissions -->
                    <div class="mt-4">
                      <h5>Admissions List</h5>
                      <table class="table table-bordered table-striped" id="admissionsTable">
                        <thead class="table-dark">
                        <tr>
                          <th>Admission ID</th>
                          <th>Course</th>
                          <th>Batch</th>
                          <th>Date</th>
                        </tr>
                        </thead>
                        <tbody>
                        <!-- Filled dynamically -->
                        </tbody>
                      </table>
                    </div>
                  </div>


                  <div class="tab-pane fade " id="addfees" role="tabpanel">
                    <h4>Add New Fee</h4>
                    <form th:action="@{/fees/save}" th:object="${feePayment}" method="post" class="mt-3">

                      <input type="hidden" th:field="*{feeId}" />

                      <div class="mb-3">
                        <label for="userSelect" class="form-label">Select User</label>
                        <select id="userSelect" name="admissionId" class="form-control" onchange="fillAdmissionDetails()">
                          <option disabled selected>---select an admission---</option>
                          <option th:each="adm : ${alladmissions}"
                                  th:value="${adm.admissionId}"
                                  th:data-admissionid="${adm.admissionId}"
                                  th:data-coursename="${adm.course.courseName}"
                                  th:data-duration="${adm.course.duration}"
                                  th:data-balance="${adm.balance}"
                                  th:data-coursefee="${adm.fees}"
                                  th:data-installment="${adm.course.installment}"
                                  th:text="${adm.userMaster.fullName}+'(AID - '+${adm.admissionId}+')'"
                                  th:selected="${feePayment.admission != null and adm.admissionId == feePayment.admission.admissionId}"> <!--edit par click kare to feeform me data apane se fill ho jaye-->
                          </option>
                        </select>
                      </div>

                      <div id="feeDetails" style="display:none">
                      <div class="row mb-3">
                        <div class="col">
<!--                          <span>Course Name: <span id="feecourseName" th:text="${feePayment.admission.course.courseName}"></span></span>-->
                          <span>Course Name: <span class="fw-bold" id="feecourseName" ></span></span>
                        </div>
                        <div class="col">
<!--                          <span>Course Fee<span id="courseFee" th:text="${feePayment.admission.course.fees}"></span></span>-->
                          <span>Course Fee: <span class="fw-bold" id="courseFee" ></span></span>
                        </div>
                      </div>

                      <div class="row mb-3">
                        <div class="col">
<!--                          <span>Total Balance<span th:text="${feePayment.admission.balance}"></span></span>-->
                          <span>Balance: <span class="fw-bold fst-italic" id="feesbalance"></span></span>
                        </div>
                        <div class="col">
<!--                          <span>Installment<span th:text="${feePayment.admission.course.installment}"></span></span>-->
                          <span>Installment: <span class="fw-bold " id="courseInstallment"></span></span>
                        </div>

                      </div>
                        <hr>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Enter Amount</label>
                        <input type="number" id="amount" th:field="*{amount}"  class="form-control" name="amount" required>
                      </div>

                      <div class="mb-3">
                        <label for="paymentMode" class="form-label">Payment Mode</label>
                        <select id="paymentMode" th:field="*{paymentMode}" name="paymentMode" class="form-control">
                          <option value="" selected disabled>--Select a payment mode</option>
                          <option value="Cash">Cash</option>
                          <option value="Online">Online</option>
                          <option value="Cheque">Cheque</option>
                          <option value="Card">Card</option>
                        </select>
                      </div>
<!--                      <button type="submit" class="btn btn-primary">Submit Fee</button>-->
                      <div class="button">
                        <input type="reset" value="Reset">
                        <input type="submit" id="feesubmitbutton"  value="Pay Fee">
                      </div>
                    </form>
                  </div>

                  <div class="tab-pane fade show active" id="addnewadmission" role="tabpanel">
                      <h4 class="mb-4">Admission Master Form</h4>
                      <form method="post" action="/admission" th:object="${newadmission}">

                        <!-- User ID -->
                        <div class="mb-3">
                          <label for="user_id"  class="form-label">User</label>
                          <select class="form-select" id="user_id"  name="user_id" required>
                            <option value="" disabled selected>Select Student</option>
                            <span th:each="student : ${allstudents}" >
                            <option th:value="${student.userId}"><span th:text="${student.fullName}"></span></option>
                              </span>
                          </select>
                        </div>

                        <!-- Course ID -->
                        <div class="mb-3">
                          <label for="course_id" class="form-label">Course</label>
                          <select class="form-select" id="course_id" name="course_id" required>
                            <option value="" disabled selected>Select Course</option>
                            <span th:each="course : ${allcourses}" >
                            <option th:value="${course.courseId}"><span th:text="${course.courseName}"></span></option>
                              </span>
                          </select>
                        </div>

                        <!-- Fees -->
                        <div class="mb-3">
                          <label for="fees" class="form-label">Fees</label>
                          <input type="number" th:field="*{fees}" step="0.01" class="form-control" id="fees" name="fees" readonly required>
                        </div>


                        <!-- Discount -->
                        <div class="mb-3">
                          <label for="discount" class="form-label">Discount</label>
                          <input type="number" th:field="*{discount}" value="0.0" step="0.01" class="form-control" id="discount" name="discount" onkeyup="calculateNet()" required>
                        </div>

                        <!-- Discount -->
                        <div class="mb-3">
                          <label for="balance" class="form-label">Balance</label>
                          <input type="number" th:field="*{balance}" value="0.0" step="0.01" class="form-control" id="balance" name="balance" readonly required>
                        </div>


                        <!-- Buttons -->
                        <div class="button">
                          <input type="reset" value="Reset">
                          <input type="submit" value="Submit">
                        </div>
                      </form>

                  </div>
                  <div class="tab-pane fade" id="update_admission" role="tabpanel">
                    <h4 class="mb-3">Update Admissions</h4>
                    <form method="post" action="/updateadmission" >

                      <!-- Admission ID -->
                      <div class="mb-3">
                        <label for="admissionID"  class="form-label">Select an admission to update</label>
                        <select class="form-select" id="admissionID"  name="admissionID" required>
                          <option value="" disabled selected>--select an admission--</option>
                          <span th:each="admission : ${alladmissions}" >
                            <option th:value="${admission.admissionId}"><span th:text="${admission.userMaster.fullName} + ' (AID - ' + ${admission.admissionId} + ')'"></span></option>
                              </span>
                        </select>
                      </div>
                      <!-- Course ID -->
                      <div class="mb-3">
                        <label for="course_id1" class="form-label">Course</label>
                        <select class="form-select" id="course_id1" name="course_id1" required>
                          <option value="" disabled selected>Select Course</option>
                          <span th:each="course : ${allcourses}" >
                            <option th:value="${course.courseId}"><span th:text="${course.courseName}"></span></option>
                              </span>
                        </select>
                      </div>
                      <!-- Fees -->
                      <div class="mb-3">
                        <label for="fees1" class="form-label">Fees</label>
                        <input type="number" step="0.01" class="form-control" id="fees1" name="fees1" readonly required>
                      </div>

                      <!-- Discount -->
                      <div class="mb-3">
                        <label for="discount1" class="form-label">Discount</label>
                        <input type="number" value="0.0" step="0.01" class="form-control" onkeyup="calculateNet2()" id="discount1" name="discount1" required>
                      </div>

                      <!-- Discount -->
                      <div class="mb-3">
                        <label for="balance" class="form-label">Balance</label>
                        <input type="number"  value="0.0" step="0.01" class="form-control" id="balance1" name="balance1" readonly required>
                      </div>


                      <!-- Buttons -->
                      <div class="button">
                        <input type="reset" value="Reset">
                        <input type="submit" value="Update">
                      </div>
                    </form>
                  </div>
                  <div class="tab-pane fade" id="admission_notifications" role="tabpanel">
                    <h4>admission Notifications</h4>
                    <p>admission Notifications list goes here.</p>
                  </div>
                </div>
              </div>
            </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Course Part -->
        <div id="course-part" class="dashboard-section">
          <h3>Course Management</h3>
          <div class="row">
            <div class="col-lg-8 col-md-8">

              <div class="card p-3">
                <!-- Tabs -->
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="batch-tab" data-bs-toggle="tab" data-bs-target="#addbatch"
                            type="button">Add New Course</button>
                  </li>

                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="fee-tab" data-bs-toggle="tab" data-bs-target="#all_courses"
                            type="button">All Courses</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#batches"
                            type="button">Course Information</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="notifications-tab" data-bs-toggle="tab"
                            data-bs-target="#notifications" type="button">Notifications</button>
                  </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content p-3">
                  <div class="tab-pane fade " id="batches" role="tabpanel">
                    <h5>User Profile</h5>
                    <p>This is the Profile section.</p>
                  </div>
                  <div class="tab-pane fade show active" id="addbatch" role="tabpanel">
                    <!--                <div class="form-container p-4">-->
                    <h4>Add New Course</h4>

                    <form method="post" th:action="@{/addcourse}" th:object="${coursedata}" class="form-div p-4">

                      <div class="form-group mb-3">
                        <label for="courseName" class="form-label"><b>Course
                          Name</b></label>
                        <input type="text" name="courseName" id="courseName" th:field="*{courseName}"
                               class="form-control" placeholder="Enter course name" required>
                        <p th:each="err : ${#fields.errors('courseName')}" th:text="${err}"
                           style="color: red; font-size: 14px; margin-top: 5px;"></p>
                      </div>

                      <div class="form-group mb-3">
                        <label for="duration" class="form-label"><b>Course
                          Duration</b></label>
<!--                        <input type="text" name="duration" id="duration" th:field="*{duration}" class="form-control"-->
<!--                               placeholder="Enter course duration(in months)">-->
                        <select id="duration" name="duration" th:field="*{duration}" class="form-select" required>
                          <option value=""  disabled selected>--Select Duration--</option>
                          <option value="1 Month" >1 Month</option>
                          <option value="2 Month" >2 Months</option>
                          <option value="3 Month" >3 Months</option>
                          <option value="4 Month" >4 Months</option>
                          <option value="5 Month" >5 Months</option>
                          <option value="6 Month" >6 Months</option>
                          <option value="7 Month" >7 Months</option>
                          <option value="8 Month" >8 Months</option>
                          <option value="9 Month" >9 Months</option>
                          <option value="10 Month" >10 Months</option>
                        </select>
                        <p th:each="err : ${#fields.errors('duration')}" th:text="${err}"
                           style="color: red; font-size: 14px; margin-top: 5px;"></p>
                      </div>

                      <div class="form-group mb-3">
                        <label for="lumpSum" class="form-label"><b>Lump sum
                          Amount</b></label>
                        <input type="text" name="lumpSum" id="lumpSum" th:field="*{lumpSum}" class="form-control"
                               placeholder="Enter Lump sum amount" required>
                        <p th:each="err : ${#fields.errors('lumpSum')}" th:text="${err}"
                           style="color: red; font-size: 14px; margin-top: 5px;"></p>
                      </div>

                      <div class="form-group mb-3">
                        <label for="installment" class="form-label"><b>Installment
                          Amount</b></label>
                        <input type="number" name="installment" id="installment" th:field="*{installment}"
                               class="form-control" placeholder="Enter installment amount" required>
                        <p th:each="err : ${#fields.errors('installment')}" th:text="${err}"
                           style="color: red; font-size: 14px; margin-top: 5px;"></p>
                      </div>
                      <!--     Submit Button    -->
                      <div class="button">
                        <input type="reset" value="Reset">
                        <input type="submit" value="Add New Course">
                      </div>
                    </form>
                    <!--                </div>-->
                  </div>
                  <div class="tab-pane fade" id="all_courses" role="tabpanel">
                    <h4>Available Courses</h4>

                    <div class="row master-div" th:each="course : ${allcourses}">
                      <div class="col-lg-12 col-md-12 col mb-3 mini-master">
                        <h3 th:text="${course.courseName}"></h3>
                        <hr>
                        <p><strong>Duration: </strong><span th:text="${course.duration}"></span>
                        </p>
                        <p><strong>Lump sum amount: </strong> ₹<span th:text="${course.lumpSum}"></span>
                        </p>
                        <p><strong>Installment Amount: </strong> ₹<span th:text="${course.installment}"></span></p>
                      </div>
                      <div class="row">
                        <div class="col d-flex justify-content-center">
                        <button class="btn btn-warning">More</button>
                        </div>
                        <div class="col d-flex justify-content-center">
                        <form method="post" th:action="@{/updatecourse}">
                          <input type="hidden" name="courseId" th:value="${course.courseId}">
                          <button class="btn btn-warning">Edit</button>
                        </form>
                        </div>
                        <div class="col d-flex justify-content-center">
                        <form method="post" th:action="@{/deletecourse}" onsubmit="return showDeletePopup()">
                          <input type="hidden" name="courseId" th:value="${course.courseId}">
                          <button class="btn btn-warning" onclick="return confirm('Do you want to delete this course?');">Delete</button>
                        </form>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="tab-pane fade" id="notifications" role="tabpanel">
                    <h5>Notifications</h5>
                    <p>Notifications list goes here.</p>
                  </div>
                </div>
              </div>
            </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>


        </div>

        <!-- Batch Part -->
        <div id="batch-part" class="dashboard-section">
          <h3>Batch Management</h3>
          <div class="row">
            <div class="col-lg-8 col-md-8">
              <div class="card p-3">
                <!-- Tabs -->
                <ul class="nav nav-tabs" id="myTab4" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="newbatch-tab" data-bs-toggle="tab" data-bs-target="#addnewbatch"
                            type="button">Add New Batch</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="batchupdate-tab" data-bs-toggle="tab" data-bs-target="#update_batch"
                            type="button">Update Batch</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link " id="batch-all-tab" data-bs-toggle="tab" data-bs-target="#allbatches"
                            type="button">All Batches</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="assign-batch" data-bs-toggle="tab" data-bs-target="#assignbatch"
                            type="button">Assign Batches</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="assigned-student" data-bs-toggle="tab" data-bs-target="#assigned_students"
                            type="button">Assigned Students</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="batchnotifications-tab" data-bs-toggle="tab"
                            data-bs-target="#batch_notifications" type="button">Notifications</button>
                  </li>

                </ul>

                <!-- Tab Content -->
                <div class="tab-content p-3">
                  <div class="tab-pane fade" id="allbatches" role="tabpanel">
                    <h4 class="text-center">All Available Batches</h4>
<!--                    <div class="row">-->
<!--                      <div class="" >-->
                        <div class="card mb-4 shadow-sm" th:each="b : ${allbatches}">

                            <div class="card-header bg-light d-flex justify-content-between">
                            <div><h4 class="card-title" th:text="${b.name}">Batch Name</h4></div>
                              <div>
                                <span class="badge bg-success" th:if="${b.status}=='ACTIVE'">Active</span>
                                <span class="badge rounded-pill bg-danger" th:unless="${b.status}=='ACTIVE'">Archived</span>
                              </div>
                            </div>
                          <div class="card-body">
                            <div class="d-flex justify-content-between">
                              <p class="card-text mb-1"><strong>Time:</strong> <span th:text="${#temporals.format(b.startDate,'hh:mm a')}">10:00 AM</span></p>
                              <p class="card-text mb-3"><strong>Mode:</strong> <span th:text="${b.mode}">Online</span></p>
                            </div>
                            <div class="d-flex justify-content-between">
                            <p class="card-text mb-1"><strong>Start Date:</strong> <span th:text="${#temporals.format(b.startDate,'dd-MM-yyyy')}">01-01-2025</span></p>
                              <p class="card-text mb-1"><strong>Faculty:</strong> <span th:text="${b.faculty.fullName}"></span></p>

                            </div>
                            <div class="mt-3 d-flex justify-content-end">
                              <a th:href="@{'admin/batch/edit/' + ${b.batchId}}" class="btn btn-sm btn-warning"><i class="bi bi-pencil-square me-1"></i>Edit</a>
                            </div>
                          </div>
<!--                        </div>-->
                      </div>
                  </div>
                  <div class="tab-pane fade show active" id="addnewbatch" role="tabpanel">
                    <h4 class="text-center">Add New Batch</h4>
                    <form method="post" action="/admin/batch/assign" th:object="${newbatch}">
                      <div class="mb-3">
                        <label for="batch" class="form-label">Batch Name</label>
                        <input type="text" id="batch" name="name" class="form-control" required>
                      </div>
                      <div class="mb-3">
                        <label for="course" class="form-label">Course</label>
                        <select id="course" name="courseId" class="form-select" required>
                          <option selected disabled value="">Select a Course</option>
                          <option th:each="c : ${allcourses}" th:value="${c.courseId}" th:text="${c.courseName}"></option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="faculty" class="form-label">Faculty</label>
                        <select id="faculty" name="userId" class="form-select" required>
                          <option selected disabled value="">Select a Faculty</option>
                          <option th:each="f : ${allfaculties}" th:value="${f.userId}" th:text="${f.fullName}+' (UID - '+${f.userId}+')'"></option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="mode" class="form-label">Mode</label>
                        <select id="mode" name="mode" class="form-select">
                          <option value="Offline">Offline</option>
                          <option value="Online">Online</option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="start" class="form-label">Start from</label>
                        <input type="datetime-local" id="start" name="startDate" class="form-control" required>
                      </div>
                      <div class="button">
                        <input type="reset" value="Reset">
                        <input type="submit" value="Add Batch">
                      </div>
                    </form>
                  </div>
                  <div class="tab-pane fade" id="update_batch" role="tabpanel">
                    <h4 class="text-center">Update Batch</h4>
                    <form method="post" action="/admin/batch/update" >
                      <div class="mb-3">
                        <label for="batch" class="form-label">Select a batch to update</label>
<!--                        <input type="text" id="batch2" name="name" class="form-control" required>-->
                        <select id="allBatchesList" name="batchId" class="form-select" required>
                          <option value="" selected disabled >--Select a batch to update--</option>
                          <option th:each="batch : ${allbatches}" th:value="${batch.batchId}" th:text="${batch.name}+' (Faculty - '+${batch.faculty.fullName}+')'"></option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="course2" class="form-label">Course</label>
                        <select id="course2" name="courseId" class="form-select" required>
                          <option selected disabled value="">Select a Course</option>
                          <option th:each="c : ${allcourses}" th:value="${c.courseId}" th:text="${c.courseName}"></option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="faculty2" class="form-label">Faculty</label>
                        <select id="faculty2" name="userId" class="form-select" required>
                          <option selected disabled value="">Select a Faculty</option>
                          <option th:each="f : ${allfaculties}" th:value="${f.userId}" th:text="${f.fullName}+' (UID - '+${f.userId}+')'"></option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="mode2" class="form-label">Mode</label>
                        <select id="mode2" name="mode" class="form-select" required>
                          <option value="Offline">Offline</option>
                          <option value="Online">Online</option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="start2" class="form-label">Start from</label>
                        <input type="datetime-local" id="start2" name="startDate" class="form-control" required>
                      </div>
                      <div class="mb-3">
                        <label for="status" class="form-label">Status</label>
                        <select id="status" name="status" class="form-select" required>
                          <option value="" selected disabled>--Select a batch status</option>
                          <option value="ACTIVE">Active</option>
                          <option value="ARCHIVED">Archived</option>
                        </select>
                      </div>
                      <div class="button">
                        <input type="reset" value="Reset">
                        <input type="submit" value="Update Batch">
                      </div>
                    </form>
                  </div>
                  <div class="tab-pane fade"  role="tabpanel" id="assignbatch">
                    <h4 class="text-center mb-4">Assign Students to Batch</h4>

                    <form id="studentBatchForm" method="POST" action="/studentbatch/save">
                      <!-- Batch Dropdown -->
                      <div class="mb-3">
                        <label for="batchId" class="form-label">Select Batch</label>
                        <select class="form-select" id="batchId" name="batchId" required>
                          <option value="" selected disabled>-- Choose Batch --</option>
<!--                          <option th:each="batch : ${allbatches}" th:value="${batch.batchId}" th:text="${batch.name}+' (Faculty - '+${batch.faculty.fullName}+')'"></option>-->
                          <option th:each="batch : ${allbatches}"
                                  th:value="${batch.batchId}"
                                  th:data-courseid="${batch.course.courseId}"
                                  th:text="${batch.name}+' (Faculty - '+${batch.faculty.fullName}+')'">
                          </option>

                        </select>
                      </div>

                      <!-- Multi Select Students -->
                      <div class="mb-3">
                        <label for="admissionIds" class="form-label">Select Students</label>
                        <select class="form-select" id="admissionIds" name="admissionIds" multiple required>
                        </select>
                        <div class="form-text">Hold Ctrl (Windows) or Command (Mac) to select multiple students</div>
                      </div>

                      <!-- Submit -->
                      <button type="submit" class="btn btn-primary w-100">Save Mappings</button>
                    </form>
                  </div>
                  <div class="tab-pane fade" id="assigned_students" role="tabpanel">
                    <h2 class="mb-4 text-center">View Students by Batch</h2>
                    <!-- Batch Dropdown -->
                    <div class="mb-3">
                      <label for="batchSelect" class="form-label fw-bold">Select Batch</label>
                      <select id="batchSelect" class="form-select">
                        <option value="" selected disabled>-- Choose Batch --</option>
                        <option th:each="batch : ${allbatches}" th:value="${batch.batchId}" th:text="${batch.name}+' (Faculty - '+${batch.faculty.fullName}+')'"></option>
                      </select>
                    </div>

                    <!-- Students Table -->
                    <table class="table table-bordered table-striped mt-4">
                      <thead class="table-dark">
                      <tr>
                        <th>Admission ID</th>
                        <th>Student Name</th>
                      </tr>
                      </thead>
                      <tbody id="studentTableBody">
                      <!-- Filled dynamically -->
                      </tbody>
                    </table>
                  </div>
                  </div>
                  <div class="tab-pane fade" id="batch_notifications" role="tabpanel">
                    <h5>User Notifications</h5>
                    <p>User Notifications list goes here.</p>
                  </div>
                </div>
              </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>
          </div>

        <!-- Message Part  -->
        <div id="fee-part" class="dashboard-section">
          <h2>Fee Management</h2>
          <div class="row">
            <div class="col-lg-8 col-md-8">
              <div class="card p-3">
                <!-- Tabs -->
                <ul class="nav nav-tabs" id="myTab5" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="submitfee-tab" data-bs-toggle="tab" data-bs-target="#submitfee"
                            type="button">Submit Fee</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="showfee-tab" data-bs-toggle="tab" data-bs-target="#showfee"
                            type="button">Show Fee</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link " id="updatefee-tab" data-bs-toggle="tab" data-bs-target="#updatefee"
                            type="button">Update Fee</button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="deletefee-tab" data-bs-toggle="tab" data-bs-target="#deletefee"
                            type="button">Assign Batches</button>
                  </li>

                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="feenotifications-tab" data-bs-toggle="tab"
                            data-bs-target="#fee_notifications" type="button">Notifications</button>
                  </li>

                </ul>

                <!-- Tab Content -->
                <div class="tab-content p-3">
                  <div class="tab-pane fade show active" id="submitfee" role="tabpanel">
                    <h4 class="text-center mb-4">Submit Fee</h4>
                  </div>

                  <div class="tab-pane fade " id="showfee" role="tabpanel">
                    <h4 class="text-center">Show Fee</h4>
                    <form  class="card p-4 shadow rounded mb-4">
                      <div class="mb-3">
                        <label for="userId" class="form-label">Select an Admission</label>
                        <select class="form-select" id="feeAdmissionId" name="feeAdmission" required>
                          <option value="0" selected disabled>--Select an admission--</option>
                          <option th:each="admission : ${alladmissions}" th:value="${admission.admissionId}" th:text="${admission.userMaster.fullName}+' (AID - '+${admission.admissionId}+')'"> </option>
                        </select>
                      </div>
                    </form>
                    <h4 class="mb-3">Fee List</h4>
                    <table class="table table-bordered table-striped" id="feetable">
                      <thead>
                      <tr>
<!--                        <th>Fee ID</th>-->
                        <th>Admission ID</th>
                        <th>Course Name</th>
                        <th>Amount</th>
                        <th>Payment Date</th>
                        <th>Payment Mode</th>

<!--                        <th>Actions</th>-->
                      </tr>
                      </thead>
                      <tbody>
<!--                      <tr th:each="fee : ${fees}">-->
<!--                        <td th:text="${fee.feeId}"></td>-->
<!--                        <td th:text="${fee.admission != null ? fee.admission.admissionId : 'N/A'}"></td>-->
<!--                        <td th:text="${fee.amount}"></td>-->
<!--                        <td th:text="${fee.paymentDate}"></td>-->
<!--                        <td th:text="${fee.paymentMode}"></td>-->
<!--                        <td>-->
<!--                          <a th:href="@{'/fees/edit/' + ${fee.feeId}}" class="btn btn-warning btn-sm">Edit</a>-->
<!--                          <a th:href="@{'/fees/delete/' + ${fee.feeId}}" class="btn btn-danger btn-sm"-->
<!--                             onclick="return confirm('Are you sure you want to delete this fee?');">Delete</a>-->
<!--                        </td>-->
<!--                      </tr>-->
                      </tbody>
                    </table>
                  </div>
                  <div class="tab-pane fade" id="updatefee" role="tabpanel">
                    <h4 class="text-center">Update Fee</h4>
                  </div>
                  <div class="tab-pane fade" role="tabpanel" id="deletefee">
                    <h4 class="text-center mb-4">Delete Fee</h4>
                  </div>
                  <div class="tab-pane fade" id="fee_notifications" role="tabpanel">
                    <h5>User Notifications</h5>
                    <p>User Notifications list goes here.</p>
                  </div>
                </div>
              </div>
            </div>
            <!-- Right Section (Shortcuts) -->
            <div class="col-lg-4 col-md-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <!-- Thymeleaf fragment for shortcuts -->
                  <div th:insert="~{fragments :: shortcut}"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Project Part -->
        <div id="project-part" class="dashboard-section">
          <h2>Projects</h2>
          <p>Here admin can track student/faculty projects.</p>
          <ul class="list-group">
            <li class="list-group-item">Festival of India - <span class="badge bg-success">Ongoing</span>
            </li>
            <li class="list-group-item">SagarJob Portal - <span class="badge bg-warning">Pending</span>
            </li>
          </ul>
        </div>

        <!-- Message Part  -->
        <div id="message-part" class="dashboard-section">
          <h2>Messages</h2>
          <div class="list-group">
            <a href="#" class="list-group-item list-group-item-action">
              <strong>Ashwin:</strong> Please approve my project.
            </a>
            <a href="#" class="list-group-item list-group-item-action">
              <strong>Ayush:</strong> Assignment deadline extension?
            </a>
          </div>
        </div>

        <!-- References Part  -->
        <div id="reference-part" class="dashboard-section">
          <h2>References</h2>
          <ul>
            <li><a href="https://spring.io/projects/spring-boot" target="_blank">Spring Boot
              Docs</a>
            </li>
            <li><a href="https://www.postgresql.org/docs/" target="_blank">PostgreSQL Docs</a></li>
            <li><a href="https://getbootstrap.com/" target="_blank">Bootstrap Docs</a></li>
          </ul>
        </div>

        <!-- Event Part  -->
        <div id="event-part" class="dashboard-section">
          <h2>Events</h2>
          <table class="table table-bordered">
            <thead class="table-dark">
            <tr>
              <th>Event Name</th>
              <th>Date</th>
              <th>Location</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>Back to Bachpan (B2B)</td>
              <td>20-09-2025</td>
              <td>Sagar</td>
            </tr>
            <tr>
              <td>XCL</td>
              <td>10-10-2025</td>
              <td>Sagar</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Custom JS -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const navLinks = document.querySelectorAll('.sidebar .nav-link');
    const sections = document.querySelectorAll('.dashboard-section');

    navLinks.forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        navLinks.forEach(l => l.classList.remove('active'));
        this.classList.add('active');
        sections.forEach(section => section.classList.remove('active'));
        const targetId = this.getAttribute('href').substring(1);
        document.getElementById(targetId).classList.add('active');
      });
    });
  });
</script>

<script>
  document.getElementById("course_id").addEventListener("change", function() {
     var courseId = this.value;
      console.log("Course id "+courseId);
     if(courseId) {
       fetch('/coursefees/' + courseId)   // Call Spring Boot GET endpoint
         .then(response => response.text()) // Either JSON OR TEXT.
         .then(data => {
           // Display data in a Input field
           document.getElementById("fees").value = data;
         })
         .catch(error => console.error('Error:', error));
     } else {
       document.getElementById("fees").value = '0.0';
     }
   });
</script>

<script>
  document.getElementById("course_id1").addEventListener("change", function() {
    var courseId = this.value;
     console.log("Course id "+courseId);
    if(courseId) {
      fetch('/coursefees/' + courseId)   // Call Spring Boot GET endpoint
        .then(response => response.text()) // Either JSON OR TEXT.
        .then(data => {
          // Display data in a Input field
          document.getElementById("fees1").value = data;
          document.getElementById("balance1").value = document.getElementById("fees1").value - document.getElementById("discount1").value  ;
        })
        .catch(error => console.error('Error:', error));
    } else {
      document.getElementById("fees1").value = '0.0';
    }
  });
</script>




<script>
  document.getElementById("admissionID").addEventListener("change", function() {
     var admissionId = this.value;
     console.log("Admission id " + admissionId);

     if(admissionId) {
       fetch('/admissiondetail/' + admissionId)   // Call Spring Boot GET endpoint
         .then(response => response.json())
         .then(data => {
           // Display data in a Input field
           document.getElementById("course_id1").value = data.courseId;
           document.getElementById("fees1").value = data.fees;
           document.getElementById("discount1").value = data.discount;
           document.getElementById("balance1").value = data.balance;

         })
         .catch(error => console.error('Error:', error));
     } else {
       // Reset fields if no admission selected
       document.getElementById("course_id1").value = "";
       document.getElementById("fees1").value = "";
       document.getElementById("discount1").value = "";
     }
   });
</script>

<script>
  document.getElementById("allBatchesList").addEventListener("change", function() {
     var batchId = this.value;
     console.log("Batch id " + batchId);

     if(batchId) {
       fetch('/admin/batch/batchdetail/' + batchId)   // Call Spring Boot GET endpoint
         .then(response => response.json())
         .then(data => {
           // Display data in a Input field
           document.getElementById("course2").value = data.courseId;
           document.getElementById("faculty2").value = data.facultyId;
           document.getElementById("mode2").value = data.mode;
           document.getElementById("status").value = data.status;
           document.getElementById("start2").value = data.startDate.substring(0,16);
            console.log("Batch status " + data.status);
         })
         .catch(error => console.error('Error:', error));
     } else {
       // Reset fields if no admission selected
       document.getElementById("course2").value = "";
       document.getElementById("faculty2").value = "";
       document.getElementById("mode2").value = "";
       document.getElementById("status").value = "";
       document.getElementById("start2").value = "";
     }
   });
</script>

<script>
  document.getElementById("feeAdmissionId").addEventListener("change", function() {
   let admissionId = this.value;

   if(admissionId) {
     fetch("/fees/feelist/admission/" + admissionId) // Spring Boot endpoint returning JSON
       .then(response => response.json())
       .then(data => {
         let tbody = document.querySelector("#feetable tbody");
         tbody.innerHTML = "";

         if(data.length === 0) {
           tbody.innerHTML = "<tr><td colspan='4' class='text-center text-muted'>No Fee found</td></tr>";
           return;
         }

         data.forEach(fee => {
           let row = `
             <tr>
               <td>${fee.admissionId}</td>
               <td>${fee.courseName}</td>
               <td>${fee.amount}</td>
               <td>${fee.paymentDate}</td>
               <td>${fee.paymentMode}</td>
             </tr>
           `;
           tbody.innerHTML += row;
         });
       })
       .catch(error => console.error("Error fetching admissions:", error));
   }
 });

</script>

<script>
  document.getElementById("userId").addEventListener("change", function() {
    let userId = this.value;

    if(userId) {
      fetch("/admissions/" + userId) // Spring Boot endpoint returning JSON
        .then(response => response.json())
        .then(data => {
          let tbody = document.querySelector("#admissionsTable tbody");
          tbody.innerHTML = "";

          if(data.length === 0) {
            tbody.innerHTML = "<tr><td colspan='4' class='text-center text-muted'>No admissions found</td></tr>";
            return;
          }

          data.forEach(admission => {
            let row = `
              <tr>
                <td>${admission.admissionId}</td>
                <td>${admission.courseName}</td>
                <td>${admission.batchName}</td>
                <td>${admission.admissionDate}</td>
              </tr>
            `;
            tbody.innerHTML += row;
          });
        })
        .catch(error => console.error("Error fetching admissions:", error));
    }
  });
</script>


<!-- Popup -->
<div id="registerPopup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
     background:rgba(0,0,0,0.5); z-index:1000; align-items:center; justify-content:center;">
  <div style="background:white; padding:20px; border-radius:10px; text-align:center;">
    <div class="loader"></div>
    <h3>⏳ Please wait...</h3>
    <p>Your form is being submitted.</p>
  </div>
</div>

<script>
  document.getElementById("registerForm").addEventListener("submit", function (event) {
   event.preventDefault(); // stop immediate submission
    let btn = document.getElementById("registerButton");
    btn.disabled = true;
    btn.value = "⏳ Processing...";

    // Show popup
    document.getElementById("registerPopup").style.display = "flex";

    setTimeout(() => {
    event.target.submit(); // submit form manually
  }, 1000);
  });
</script>

<script>
  document.getElementById("batchSelect").addEventListener("change", function() {
   let batchId = this.value;
   let tbody = document.getElementById("studentTableBody");
   tbody.innerHTML = "";

   if (batchId) {
     fetch("/students/" + batchId)
       .then(res => res.json())
       .then(data => {
         if (data.length === 0) {
           tbody.innerHTML = "<tr><td colspan='2' class='text-center text-muted'>No students found</td></tr>";
         } else {
           data.forEach(student => {
             let row = `<tr>
               <td>${student.admissionId}</td>
               <td>${student.studentName}</td>
             </tr>`;
             tbody.innerHTML += row;
           });
         }
       });
   }
 });
</script>

<script th:inline="javascript">
  /*<![CDATA[*/
  let allAdmissions = [[${alladmissions2}]];
  /*]]>*/
</script>

<script>

  document.getElementById("batchId").addEventListener("change", function () {
  let batchId = this.value;
  let courseId = this.options[this.selectedIndex].getAttribute("data-courseid");
  let admissionSelect = document.getElementById("admissionIds");
  admissionSelect.innerHTML = ""; // clear previous

  if (!batchId) return;

  fetch("/studentbatch/students/" + batchId)
    .then(res => res.json())
    .then(assignedIds => {
      allAdmissions.forEach(admission => {
        if (admission.courseId == courseId) {   // filter by course
          let option = document.createElement("option");
          option.value = admission.admissionId;
          option.text = admission.studentName + " (AID - " + admission.admissionId + ")";

          if (assignedIds.includes(admission.admissionId)) {
            option.disabled = true;
            option.text += " (Already Assigned)";
          }

          admissionSelect.appendChild(option);
        }
      });
    });
});

</script>

<script>
  function calculateNet(){
     const courseFee=document.getElementById("fees").value;
     const discount=document.getElementById("discount").value;
     const net=courseFee-discount;
     document.getElementById("balance").value = net;
  }
   function fillAdmissionDetails() {
        let select = document.getElementById("userSelect");
        let selectedOption = select.options[select.selectedIndex];
        document.getElementById('feeDetails').style.display="block";

      //  document.getElementById("admissionId").value = selectedOption.getAttribute("data-admissionid") || "";
        document.getElementById("feecourseName").innerHTML = selectedOption.getAttribute("data-coursename") || "";
        document.getElementById("courseFee").innerHTML = selectedOption.getAttribute("data-coursefee") || "";
        document.getElementById("feesbalance").innerHTML = selectedOption.getAttribute("data-balance") || "";
        document.getElementById("courseInstallment").innerHTML = selectedOption.getAttribute("data-installment") || "";

       let balance = Number(selectedOption.getAttribute("data-balance"));

        let feeBtn =document.getElementById("feesubmitbutton");
        if (balance === 0) {
          feeBtn.disabled = true;
          feeBtn.style.backgroundColor = "green";
          feeBtn.style.color = "white";
          feeBtn.value = "Paid";
        }  else {
        // nothing paid yet
        feeBtn.disabled = false;
        feeBtn.style.backgroundColor = "rgb(40, 40, 64)";
        feeBtn.style.color = "white";
        feeBtn.value = "Pay Fee"; // optional
      }
    }

  function calculateNet2(){
     const courseFee=document.getElementById("fees1").value;
     const discount=document.getElementById("discount1").value;
     const net=courseFee-discount;
     document.getElementById("balance1").value = net;
  }
</script>

<script>
  /* document.getElementById("userId").addEventListener("change", function() {
    let userId = this.value;

    if(userId) {
      fetch("/admissions/" + userId) // Spring Boot endpoint returning JSON
        .then(response => response.json())
        .then(data => {
          let tbody = document.querySelector("#admissionsTable tbody");
          tbody.innerHTML = "";

          if(data.length === 0) {
            tbody.innerHTML = "<tr><td colspan='4' class='text-center text-muted'>No admissions found</td></tr>";
            return;
          }

          data.forEach(admission => {
            let row = `
              <tr>
                <td>${admission.admissionId}</td>
                <td>${admission.courseName}</td>
                <td>${admission.batchName}</td>
                <td>${admission.admissionDate}</td>
              </tr>
            `;
            tbody.innerHTML += row;
          });
        })
        .catch(error => console.error("Error fetching admissions:", error));
    }
  });*/
</script>

</body>

</html>
